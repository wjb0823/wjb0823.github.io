<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="索引原理MySQL官方对索引定义：是存储引擎用于快速查找记录的一种数据结构。需要额外开辟空间和数据维护工作。  索引是物理数据页存储，在数据文件中（InnoDB，ibd文件），利用数据页(page)存储。 索引可以加快检索速度，但是同时也会降低增删改操作速度，索引维护需要代价。  MySQL默认使用B+树结构管理索引,B+树中的B代表平衡（balance ),在讲B+树之前必须先了解二叉树、平衡二">
<meta name="keywords" content="Mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL_索引原理与优化">
<meta property="og:url" content="http://yoursite.com/2017/12/21/mysql/009.MySQL_索引原理与优化/index.html">
<meta property="og:site_name" content="生活值得">
<meta property="og:description" content="索引原理MySQL官方对索引定义：是存储引擎用于快速查找记录的一种数据结构。需要额外开辟空间和数据维护工作。  索引是物理数据页存储，在数据文件中（InnoDB，ibd文件），利用数据页(page)存储。 索引可以加快检索速度，但是同时也会降低增删改操作速度，索引维护需要代价。  MySQL默认使用B+树结构管理索引,B+树中的B代表平衡（balance ),在讲B+树之前必须先了解二叉树、平衡二">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/57.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/59.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/60.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/61.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/62.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/63.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/64.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/66.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/65.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/67.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/98.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/69.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/70.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/001.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/002.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/004.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/003.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/005.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/71.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/72.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/73.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/74.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/73.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/75.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/76.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/77.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/78.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/79.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/80.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/81.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/82.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/83.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/84.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/85.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/86.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/87.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/88.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/89.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/90.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/91.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/92.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/93.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/94.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/95.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/012.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/96.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/97.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/96.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/006.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/007.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/015.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/008.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/009.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/010.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/011.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/013.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/014.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/015.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/015.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/016.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/017.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/018.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/99.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/100.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/102.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/103.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/028.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/104.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/105.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/107.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/108.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/020.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/021.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/022.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/110.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/022.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/024.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/025.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/026.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/110.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/027.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/111.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/114.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/113.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/115.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/116.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/117.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/029.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/030.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/119.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/037.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/038.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/031.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/121.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/034.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/035.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/036.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/039.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/040.jpg">
<meta property="og:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/120.jpg">
<meta property="og:updated_time" content="2017-12-27T14:15:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL_索引原理与优化">
<meta name="twitter:description" content="索引原理MySQL官方对索引定义：是存储引擎用于快速查找记录的一种数据结构。需要额外开辟空间和数据维护工作。  索引是物理数据页存储，在数据文件中（InnoDB，ibd文件），利用数据页(page)存储。 索引可以加快检索速度，但是同时也会降低增删改操作速度，索引维护需要代价。  MySQL默认使用B+树结构管理索引,B+树中的B代表平衡（balance ),在讲B+树之前必须先了解二叉树、平衡二">
<meta name="twitter:image" content="g:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/57.jpg">





  
  
  <link rel="canonical" href="http://yoursite.com/2017/12/21/mysql/009.MySQL_索引原理与优化/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>MySQL_索引原理与优化 | 生活值得</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">生活值得</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-首页">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-分类">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-归档">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/21/mysql/009.MySQL_索引原理与优化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="最光阴">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="生活值得">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MySQL_索引原理与优化

              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-12-21 22:15:27" itemprop="dateCreated datePublished" datetime="2017-12-21T22:15:27+08:00">2017-12-21</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-12-27 22:15:27" itemprop="dateModified" datetime="2017-12-27T22:15:27+08:00">2017-12-27</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Mysql/" itemprop="url" rel="index"><span itemprop="name">Mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="索引原理"><a href="#索引原理" class="headerlink" title="索引原理"></a>索引原理</h3><p>MySQL官方对索引定义：是存储引擎用于快速查找记录的一种数据结构。需要额外开辟空间和数据维护工作。</p>
<ul>
<li>索引是物理数据页存储，在数据文件中（InnoDB，ibd文件），利用数据页(page)存储。</li>
<li>索引可以加快检索速度，但是同时也会降低增删改操作速度，索引维护需要代价。</li>
</ul>
<p>MySQL默认使用B+树结构管理索引,B+树中的B代表平衡（balance ),在讲B+树之前必须先了解二叉树、平衡二叉树(AVL) 和 B-Tree，因为B+Tree即由这些树逐步优化而来。</p>
<h4 id="1-二叉查找树"><a href="#1-二叉查找树" class="headerlink" title="1.二叉查找树"></a>1.二叉查找树</h4><p>下面是一张数据库的表,有两列,分别是 Col1 和 Col2</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/57.jpg" style="width:400px"> </p>
<p>我们来查找一下col2=87的这行数据,SQL语句如下:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> a <span class="keyword">where</span> col2 = <span class="number">87</span></span><br></pre></td></tr></table></figure>
<p>没有用索引时执行上面的查询 , 数据从磁盘一条一条拿来对比最终找到结果，如果数据表很大,数据又在表尾的话,需要花费非常多的时间检索,效率低下。</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/59.jpg" style="width:180px">   </p>
<p><strong>优化方式: 使用二叉查找树</strong> </p>
<p>为了加快查找,可以维护一个二叉树,二叉树具有以下性质：左子树的键值小于根的键值，右子树的键值大于根的键值。 每个节点分别保存字段数据和一个指向对应数据记录物理地址的指针.</p>
<p>这样查找时 就可以使用二叉树查找获取相应的数据,从而快速检索出符合条件的记录</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/60.jpg" style="width:680px"> </p>
<p>对该二叉树的节点进行查找发现深度为1的节点的查找次数为1,深度为2的查找次数为2,深度为n的节点的查找次数为n,因此其平均查找次数为 (1+2+2+3+3+3+3) / 6 = 2.8次.</p>
<p><strong>二叉查找树的缺点</strong></p>
<p>MySQL 索引底层使用的并不是二叉树,因为二叉树存在一个很大的缺陷,就是在存储有序的数据时,最终的排列结构会形成一个单向链表,对于读取某个指定节点时效率会很低.</p>
<p>测试链接: <a href="https://www.cs.usfca.edu/~galles/visualization/BST.html" target="_blank" rel="noopener">https://www.cs.usfca.edu/~galles/visualization/BST.html</a></p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/61.jpg" style="width:380px"> </p>
<h4 id="2-平衡二叉树-AVL-Tree"><a href="#2-平衡二叉树-AVL-Tree" class="headerlink" title="2.平衡二叉树 (AVL Tree)"></a>2.平衡二叉树 (AVL Tree)</h4><p>二叉查找树存在不平衡的问题，那么可以通过树的叶子节点自动旋转和调整，让二叉树始终保持基本平衡的状态，这样就能够保持二叉查找树的最佳性能。AVL树 就是基于以上思路的自调整平衡二叉树.</p>
<p>平衡二叉树（AVL树）在符合二叉查找树的条件下，还满足任何节点的两个子树的高度最大差为1。</p>
<p><strong>AVL 树与非AVL树对比</strong></p>
<p>​    左边是AVL树，它的任何节点的两个子树的高度差&lt;=1</p>
<p>​    右边的不是AVL树，其根节点的左子树高度为3，而右子树高度为1； </p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/62.jpg" style="width:680px">  </p>
<p><strong>AVL树的旋转方式</strong></p>
<p>AVL树失去平衡之后，可以通过旋转使其恢复平衡. 接下来我们来介绍一下两种失去平衡的情况下对应的旋转方式.</p>
<ul>
<li><p>LL旋转(左左旋转),根节点的左子树高度比右子树高度高2. 恢复步骤:</p>
<ol>
<li>将根节点的左孩子作为新根节点</li>
<li>将新根节点的右孩子作为原来根节点的左孩子</li>
<li>将原根节点的作为新根节点的右孩子</li>
</ol>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/63.jpg" style="width:680px"> </p>
</li>
<li><p>RR旋转(右右旋转) ,根节点的右子树高度比左子树高度高2,旋转方法与LL旋转对称</p>
<ol>
<li>将根节点的右孩子作为新根节点</li>
<li>将新根节点的左孩子作为原来根节点的右孩子</li>
<li>将原根节点的作为新根节点的左孩子</li>
</ol>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/64.jpg" style="width:680px"> </p>
</li>
</ul>
<p><strong>AVL树的优缺点</strong></p>
<ul>
<li>优点<ul>
<li>叶子节点的层级减少</li>
<li>形态上能够保持平衡</li>
<li>查询效率提升,大量的顺序插入也不会导致查询性能的降低.</li>
</ul>
</li>
<li>缺点<ul>
<li>一个节点最多分裂出两个子节点, 树的高度太高,导致IO次数过多</li>
<li>节点里面只保存着一个关键字,每次操作获取的目标数据太少</li>
</ul>
</li>
</ul>
<h4 id="3-B-Tree"><a href="#3-B-Tree" class="headerlink" title="3.B-Tree"></a>3.B-Tree</h4><p>因为AVL树存在的缺陷,MySQL并没有把它作为索引存储的数据结构.如何减少磁盘IO是数据库提升性能的关键,每个节点尽可能多的存储一些数据,每次磁盘IO就能多加载一些数据到内存,B-Tree就是基于这样的思想设计的.</p>
<p><strong>B-Tree介绍</strong> </p>
<p>B-Tree是一种平衡的多路查找树,B树允许一个节点存放多个数据. 这样可以在尽可能减少树的深度的同时,存放更多的数据(把<strong>瘦高</strong>的树变的<strong>矮胖</strong>). </p>
<p>B-Tree中所有节点的子树个数的最大值称为B-Tree的阶,用m表示.一颗m阶的B树,如果不为空,就必须满足以下条件.</p>
<ul>
<li>m阶的B-Tree满足以下条件:<ol>
<li>每个节点最多拥有m-1个关键字(根节点除外),也就是m个子树</li>
<li>根节点至少有两个子树(可以没有子树,有就必须是两个)</li>
<li>分支节点至少有(m/2)颗子树 (除去根节点和叶子节点其他都是分支节点)</li>
<li>所有叶子节点都在同一层,并且以升序排序</li>
</ol>
</li>
</ul>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/66.jpg" style="width:700px; height:250px"> </p>
<ul>
<li><p>什么是B-Tree的阶 ?</p>
<p>所有节点中，节点【60,70,90】拥有的子节点数目最多，四个子节点（灰色节点），所以可以上面的B-Tree为4阶B树</p>
</li>
</ul>
<p><strong>B-Tree结构存储索引的特点</strong>  </p>
<p>为了描述B-Tree首先定义一条记录为一个键值对[key, data] ，key为记录的键值，对应表中的主键值(聚簇索引)，data为一行记录中除主键外的数据。对于不同的记录，key值互不相同</p>
<ul>
<li>索引值和data数据分布在整棵树结构中</li>
<li>白色块部分是指针,存储着子节点的地址信息。</li>
<li>每个节点可以存放多个索引值及对应的data数据</li>
<li>树节点中的多个索引值从左到右升序排列</li>
</ul>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/65.jpg" style="width:680px"> </p>
<p><strong>B-Tree的查找操作</strong></p>
<p>B-Tree的每个节点的元素可以视为一次I/O读取，树的高度表示最多的I/O次数，在相同数量的总元素个数下，每个节点的元素个数越多，高度越低，查询所需的I/O次数越少.</p>
<p>B-Tree的查找可以分为3步:</p>
<ol>
<li><p>首先要查找节点,因为B-Tree通常是在磁盘上存储的,所以这步需要进行磁盘IO操作</p>
</li>
<li><p>第二步查找关键字,当找到某个节点后将该节点<strong>读入内存中</strong>, 然后通过顺序或者折半查找来查找关键字,如果命中就结束查找。</p>
</li>
<li><p>若没有找到关键字，则需要判断大小来找到合适的分支继续查找,如果已经找到了叶子节点,就结束查询。</p>
</li>
</ol>
<p>下面我们演示一下在一个3阶B-Tree中查找元素21的过程</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">演示地址: https:<span class="comment">//www.cs.usfca.edu/~galles/visualization/BTree.html</span></span><br><span class="line">插入顺序: <span class="number">32</span> <span class="number">3</span> <span class="number">12</span> <span class="number">54</span> <span class="number">1</span> <span class="number">9</span> <span class="number">14</span> <span class="number">21</span> <span class="number">54</span> <span class="number">65</span> <span class="number">66</span></span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/67.jpg" style="width:680px; height:250px"> </p>
<p><strong>B-Tree总结</strong> </p>
<ul>
<li><p>优点: B树可以在内部节点存储键值和相关记录数据，因此把频繁访问的数据放在靠近根节点的位置将大大提高热点数据的查询效率。</p>
</li>
<li><p>缺点: B树中每个节点不仅包含数据的key值,还有data数据. 所以当data数据较大时,会导致每个节点存储的key值减少,并且导致B树的层数变高.增加查询时的IO次数.</p>
</li>
<li><p>使用场景: B树主要应用于文件系统以及部分数据库索引，如MongoDB，大部分关系型数据库索引则是使用B+树实现</p>
</li>
</ul>
<h4 id="4-B-Tree"><a href="#4-B-Tree" class="headerlink" title="4.B+Tree"></a>4.B+Tree</h4><p>B+Tree是在B-Tree基础上的一种优化，使其更适合实现存储索引结构，InnoDB存储引擎就是用B+Tree实现其索引结构。</p>
<p><strong>B+Tree的特征</strong></p>
<ul>
<li>非叶子节点只存储键值信息.</li>
<li>所有叶子节点之间都有一个链指针.</li>
<li>数据记录都存放在叶子节点中.</li>
</ul>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/98.jpg" style="width:680px; height:250px">  </p>
<p><strong>B+Tree的优势</strong>  </p>
<ol>
<li>B+Tree是B Tree的变种，B Tree能解决的问题，B+Tree也能够解决（降低树的高度，增大节点存储数据量）</li>
<li>B+Tree扫库和扫表能力更强，如果我们要根据索引去进行数据表的扫描，对B Tree进行扫描，需要把整棵树遍历一遍，而B+Tree只需要遍历他的所有叶子节点即可（叶子节点之间有引用）。</li>
<li>B+Tree磁盘读写能力更强，他的根节点和支节点不保存数据区，所有根节点和支节点同样大小的情况下，保存的关键字要比B Tree要多。而叶子节点不保存子节点引用。所以，B+Tree读写一次磁盘加载的关键字比B Tree更多。</li>
<li>B+Tree排序能力更强，如上面的图中可以看出，B+Tree天然具有排序功能。</li>
<li>B+Tree查询效率更加稳定，每次查询数据，查询IO次数一定是稳定的。当然这个每个人的理解都不同，因为在B Tree如果根节点命中直接返回，确实效率更高。</li>
</ol>
<p><strong>一颗B+Tree可以存放多少数据</strong>  </p>
<p>MySQL设计者将一个B+Tree的节点的大小设置为等于一个页. (这样做的目的是每个节点只需要一次I/O就可以完全载入), InnoDB的一个页的大小是16KB,所以每个节点的大小也是16KB, 并且B+Tree的根节点是保存在内存中的,子节点才是存储在磁盘上.</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/69.jpg" style="width:680px; height:250px"> </p>
<p>假设一个B+树高为2，即存在一个根节点和若干个叶子节点，那么这棵B+树的存放总记录数为：根节点指针数*单个叶子节点记录行数.</p>
<ul>
<li><strong>计算根节点指针数</strong>: 假设表的主键为INT类型,占用的就是4个字节,或者是BIGINT占用8个字节, 指针大小为6个字节,那么一个页(就是B+Tree中的一个节点) ,大概可以存储: 16384B / (4B+6B) = 1638 ,一个节点最多可以存储1638个索引指针.</li>
<li><strong>计算每个叶子节点的记录数</strong>:我们假设一行记录的数据大小为1k,那么一页就可以存储16行数据,16KB / 1KB = 16.</li>
<li><strong>一颗高度为2的B+Tree可以存放的记录数为</strong>: 1638 <em> 16=26208 条数据记录, 同样的原理可以推算出一个高度3的B+Tree可以存放: 1638 </em> 1638 * 16 = 42928704条这样的记录.</li>
</ul>
<p><strong>所以InnoDB中的B+Tree高度一般为1-3层,就可以满足千万级别的数据存储</strong>,在查找数据时一次页的查找代表一次 IO，所以通过主键索引查询通常只需要 1-3 次 IO 操作即可查找到数据。</p>
<h4 id="5-Hash索引"><a href="#5-Hash索引" class="headerlink" title="5.Hash索引"></a>5.Hash索引</h4><p>MySQL中索引的常用数据结构有两种: 一种是BTree,另一种则是Hash.</p>
<p>Hash底层实现是由Hash表来实现的，是根据键值 <key,value> 存储数据的结构。非常适合根据key查找value值，也就是单个key查询，或者说等值查询。</key,value></p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/70.jpg" style="width:680px; height:250px"> </p>
<p>对于每一行数据，存储引擎都会对所有的索引列计算一个哈希码，哈希码是一个较小的值,如果出现哈希码值相同的情况会拉出一条链表.</p>
<p><strong>Hsah索引的优点</strong></p>
<ul>
<li>因为索引自身只需要存储对应的Hash值,所以索引结构非常紧凑, 只需要做等值比较查询，而不包含排序或范围查询的需求，都适合使用哈希索引 .</li>
<li>没有哈希冲突的情况下,等值查询访问哈希索引的数据非常快.(如果发生Hash冲突,存储引擎必须遍历链表中的所有行指针,逐行进行比较,直到找到所有符合条件的行).</li>
</ul>
<p><strong>Hash索引的缺点</strong></p>
<ul>
<li><p>哈希索引只包含哈希值和行指针，而不存储字段值，所以不能使用索引中的值来避免读取行。</p>
</li>
<li><p>哈希索引只支持等值比较查询。不支持任何范围查询和部分索引列匹配查找。</p>
</li>
<li><p>哈希索引数据并不是按照索引值顺序存储的，所以也就无法用于排序。</p>
</li>
</ul>
<h4 id="6-聚簇索引与非聚簇索引"><a href="#6-聚簇索引与非聚簇索引" class="headerlink" title="6.聚簇索引与非聚簇索引"></a>6.聚簇索引与非聚簇索引</h4><p><strong>聚簇索引(主键索引)</strong>: 将数据存储与索引放到了一块,索引结构的叶子节点保存了行数据.</p>
<p><strong>非聚簇索引(非主键/二级索引)</strong>: 将数据与索引分开存储，索引结构的叶子节点指向了数据对应的位置.</p>
<p>在InnoDB引擎中，主键索引采用的就是聚簇索引结构存储。</p>
<p>假设有一个 A表 表中字段有: ( id PK , name KEY , sex ,level),表中id是聚集索引, name是普通索引.</p>
<p>表中有四条记录: </p>
<div class="table-container">
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>sex</th>
<th>level</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>ls</td>
<td>0</td>
<td>A</td>
</tr>
<tr>
<td>3</td>
<td>zs</td>
<td>0</td>
<td>A</td>
</tr>
<tr>
<td>5</td>
<td>ww</td>
<td>1</td>
<td>B</td>
</tr>
<tr>
<td>9</td>
<td>sq</td>
<td>0</td>
<td>C</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>聚簇索引（聚集索引）</p>
<p>聚簇索引是一种数据存储方式，InnoDB的聚簇索引就是按照主键顺序构建 B+Tree结构。B+Tree 的叶子节点就是行记录，行记录和主键值紧凑地存储在一起。 这也意味着 InnoDB 的主键索引就是数据表本身，它按主键顺序存放了整张表的数据，占用的空间就是整个表数据量的大小。通常说的<strong>主键索引</strong>就是聚集索引。</p>
<p>InnoDB的表要求必须要有聚簇索引：</p>
<ul>
<li>如果表定义了主键，则主键索引就是聚簇索引</li>
<li>如果表没有定义主键，则第一个非空unique列作为聚簇索引</li>
<li>否则InnoDB会从建一个隐藏的row-id作为聚簇索引</li>
</ul>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/001.jpg" style="width:380px; height:350px"> </p>
</li>
<li><p><strong>非聚簇索引(二级索引)</strong>  </p>
<p>InnoDB的二级索引，是根据索引列构建 B+Tree结构。但在 B+Tree 的叶子节点中只存了索引列和主键的信息。二级索引占用的空间会比聚簇索引小很多， 通常创建辅助索引就是为了提升查询效率。一个表InnoDB只能创建一个聚簇索引，但可以创建多个辅助索引。</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/002.jpg" style="width:330px; height:350px"> </p>
</li>
</ul>
<ul>
<li><p><strong>使用聚簇索引时要注意的问题</strong></p>
<ul>
<li><p>当使用主键为聚簇索引时，主键最好不要使用uuid，因为uuid的值太过离散，不适合排序且可能出线新增加记录的uuid，会插入在索引树中间的位置，导致索引树调整复杂度变大，消耗更多的时间和资源。</p>
</li>
<li><p>建议使用int类型的自增，方便排序并且默认会在索引树的末尾增加主键值，对索引树的结构影响最小。而且，主键值占用的存储空间越大，辅助索引中保存的主键值也会跟着变大，占用存储空间，也会影响到IO操作读取到的数据量。</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p><strong>使用非聚簇索引(二级索引) 要注意的问题</strong> </p>
<p><strong>1) 先说一下什么是回表 ?</strong> </p>
<p>我们来执行这样一条 <code>select * from A where name = &#39;ls&#39;;</code>  , MySQL在执行这条SQL时的过程是这样的:</p>
<ul>
<li><p>在通过name进行查询时,需要扫描两遍索引树</p>
<p>第一遍: 先通过普通索引定位到 主键值 = 1</p>
<p>第二遍: 根据主键值在聚集索引中定位到具体的记录</p>
</li>
</ul>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/004.jpg" style="width:530px; height:350px"> </p>
<p><strong>回表:  先根据普通索引查询到主键值，再根据主键值在聚集索引中获取行记录,这就是回表. 回表查询,相对于只扫描一遍聚集索引树的性能 要低一些</strong> </p>
</li>
</ul>
<p>  <strong>2) 使用覆盖索引来避免回表</strong> </p>
<ul>
<li><p><strong>什么是覆盖索引</strong></p>
<p>如果一个索引包含了所有需要查询的字段的值 (<strong>不需要回表</strong>)，这个索引就是覆盖索引。</p>
<p>覆盖索引是一种避免回表查询的优化策略:  只需要在一棵索引树上就能获取    SQL所需的所有列数据，无需回表，速度更快。</p>
</li>
</ul>
<ul>
<li><p><strong>具体的实现方式: </strong></p>
<p>将被查询的字段建立普通索引或者<strong>联合索引</strong>，这样的话就可以直接返回索引中的数据，不需要再通过聚集索引去定位行记录，避免了回表的情况发生。</p>
<p>比如: 下面这样一条SQL语句,就使用到了覆盖索引.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> user_name,user_age,user_level <span class="keyword">FROM</span> <span class="keyword">users</span> </span><br><span class="line"><span class="keyword">WHERE</span> user_name = <span class="string">'tom'</span> <span class="keyword">AND</span> user_age = <span class="number">17</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/003.jpg" style="width:530px; height:270px">  </p>
</li>
</ul>
<h3 id="Explain性能分析"><a href="#Explain性能分析" class="headerlink" title="Explain性能分析"></a>Explain性能分析</h3><h4 id="1-Explain-概述"><a href="#1-Explain-概述" class="headerlink" title="1.Explain 概述"></a>1.Explain 概述</h4><p>使用 <code>EXPLAIN</code> 关键字可以模拟优化器来执行SQL查询语句，从而知道MySQL是如何处理我们的SQL语句的。分析出查询语句或是表结构的性能瓶颈。</p>
<ul>
<li><strong>MySQL查询过程</strong></li>
</ul>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/005.jpg" style="width:630px; height:370px"> </p>
<p>通过explain我们可以获得以下信息：</p>
<ul>
<li>表的读取顺序</li>
<li>数据读取操作的操作类型</li>
<li>哪些索引可以被使用</li>
<li>哪些索引真正被使用</li>
<li>表的直接引用</li>
<li>每张表的有多少行被优化器查询了</li>
</ul>
<p>Explain使用方式: <strong>explain+sql语句</strong>, 通过执行explain可以获得sql语句执行的相关信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> L1;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/71.jpg" style="width:830px; height:70px">  </p>
<h4 id="2-Explain-详解"><a href="#2-Explain-详解" class="headerlink" title="2.Explain 详解"></a>2.Explain 详解</h4><p><strong>1) 数据准备</strong>  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> test_explain <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> <span class="string">'utf8'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> L1(<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,title <span class="built_in">VARCHAR</span>(<span class="number">100</span>) );</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> L2(<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,title <span class="built_in">VARCHAR</span>(<span class="number">100</span>) );</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> L3(<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,title <span class="built_in">VARCHAR</span>(<span class="number">100</span>) );</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> L4(<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,title <span class="built_in">VARCHAR</span>(<span class="number">100</span>) );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 每张表插入3条数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> L1(title) <span class="keyword">VALUES</span>(<span class="string">'ruyuan001'</span>),(<span class="string">'ruyuan002'</span>),(<span class="string">'ruyuan003'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> L2(title) <span class="keyword">VALUES</span>(<span class="string">'ruyuan004'</span>),(<span class="string">'ruyuan005'</span>),(<span class="string">'ruyuan006'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> L3(title) <span class="keyword">VALUES</span>(<span class="string">'ruyuan007'</span>),(<span class="string">'ruyuan008'</span>),(<span class="string">'ruyuan009'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> L4(title) <span class="keyword">VALUES</span>(<span class="string">'ruyuan010'</span>),(<span class="string">'ruyuan011'</span>),(<span class="string">'ruyuan012'</span>);</span><br></pre></td></tr></table></figure>
<p><strong>2) ID字段说明</strong></p>
<p><strong>select查询的序列号，包含一组数字，表示查询中执行select子句或操作表的顺序</strong></p>
<ul>
<li><p>id相同，执行顺序由上至下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span>  L1,L2,L3 <span class="keyword">WHERE</span> L1.id=L2.id <span class="keyword">AND</span> L2.id = L3.id;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/72.jpg" style="width:830px; height:70px"> </p>
</li>
</ul>
<ul>
<li><p>id不同，如果是子查询，id的序号会递增，<strong>id值越大优先级越高，越先被执行</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L2 <span class="keyword">WHERE</span> <span class="keyword">id</span> = (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> L1 <span class="keyword">WHERE</span> <span class="keyword">id</span> = (<span class="keyword">SELECT</span> L3.id <span class="keyword">FROM</span> L3 <span class="keyword">WHERE</span> L3.title = <span class="string">'ruyuan007'</span>));</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/73.jpg" style="width:830px; height:70px"> </p>
</li>
</ul>
<p><strong>3) select_type和table字段说明</strong> </p>
<p><strong>表示查询类型，主要用于区别普通查询，联合查询，子查询等的复杂查询</strong></p>
<ul>
<li><p><code>simple</code> :  简单的select查询，查询中不包含子查询或者UNION</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L1 <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/74.jpg" style="width:830px; height:70px"> </p>
</li>
</ul>
<ul>
<li><p><code>primary</code> :  查询中若包含任何复杂的子部分，最外层查询被标记</p>
</li>
<li><p><code>subquery</code> : 在select或where列表中包含了子查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L2 <span class="keyword">WHERE</span> <span class="keyword">id</span> = (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> L1 <span class="keyword">WHERE</span> <span class="keyword">id</span> = (<span class="keyword">SELECT</span> L3.id <span class="keyword">FROM</span> L3 <span class="keyword">WHERE</span> L3.title = <span class="string">'ruyuan08'</span>));</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/73.jpg" style="width:830px; height:70px"></p>
</li>
</ul>
<ul>
<li><p><code>union</code> :  union连接的两个select查询，第一个查询是dervied派生表，除了第一个表外，第二个以后的表select_type都是union</p>
</li>
<li><p><code>derived</code> : 在from列表中包含的子查询被标记为derived（派生表），MySQL会递归执行这些子查询，把结果放到临时表中</p>
</li>
<li><p><code>union result</code> : UNION 的结果 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> (<span class="keyword">select</span> * <span class="keyword">from</span> L3 <span class="keyword">union</span> <span class="keyword">select</span> * <span class="keyword">from</span> L4)a;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/75.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<p><strong>4) type字段说明</strong></p>
<p>type字段在 MySQL 官网文档描述如下：</p>
<blockquote>
<p>The join type. For descriptions of the different types.</p>
</blockquote>
<p><strong>type字段显示的是连接类型 ( join type表示的是用什么样的方式来获取数据)，它描述了找到所需数据所使用的扫描方式, 是较为重要的一个指标。</strong> </p>
<p>下面给出各种连接类型,按照从最佳类型到最坏类型进行排序:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 完整的连接类型比较多</span></span><br><span class="line">system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 简化之后,我们可以只关注一下几种</span></span><br><span class="line">system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>一般来说,需要保证查询至少达到 range级别,最好能到ref,否则就要就行SQL的优化调整</strong>   </p>
</blockquote>
<p>下面介绍type字段不同值表示的含义: </p>
<ul>
<li><p><strong>system: </strong>  表中就仅有一行数据的时候. 这是const连接类型的一个特例,很少出现。</p>
</li>
<li><p><strong>const: </strong> const表示命中主键索引(primary key) 或者唯一索引(unique),表示通过索引一次就找到数据记录.</p>
<p>因为只匹配一条记录,所以被连接的部分是一个常量. (如果将主键放在 where条件中, MySQL就能将该查询转换为一个常量) 这种类型非常快.</p>
<p>例如以下查询:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> L1 <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为L1表的title字段添加唯一索引</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> L1 <span class="keyword">add</span> <span class="keyword">unique</span>(title);</span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> L1 <span class="keyword">where</span> title = <span class="string">'ruyuan001'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/76.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<ul>
<li><p><strong>eq_ref</strong> : 对于前一个表中的每个一行，后表只有一行被扫描。除了system和const类型之外，这是最好的连接类型。只有当联接使用索引的部分都是主键或惟一非空索引时，才会出现这种类型。</p>
<p>例如以下查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> L1.id,L1.title <span class="keyword">FROM</span> L1 <span class="keyword">left</span> <span class="keyword">join</span> L2 <span class="keyword">on</span> L1.id = L2.id;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/77.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<ul>
<li><p><strong>ref </strong>: 非唯一性索引扫描(使用了普通索引), 对于前表的每一行(row)，后表可能有多于一行的数据被扫描,它返回所有匹配某个单独值的行.</p>
<p>例如以下查询:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 为L1表的title字段添加普通索引</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> L1 <span class="keyword">add</span> <span class="keyword">index</span> idx_title (title) ;</span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L1 <span class="keyword">inner</span> <span class="keyword">join</span> L2 <span class="keyword">on</span> L1.title = L2.title;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/78.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<ul>
<li><p><strong>range </strong>:  索引上的范围查询,检索给定范围的行,between，in函数，&gt; 都是典型的范围(range)查询, 例如以下查询: </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L1 <span class="keyword">WHERE</span> L1.id <span class="keyword">between</span> <span class="number">1</span> <span class="keyword">and</span>  <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/79.jpg" style="width:830px; height:80px"> </p>
<blockquote>
<p>注: 当in函数中的数据很大时,可能会导致效率下降,最终不走索引</p>
</blockquote>
</li>
</ul>
<ul>
<li><p><strong>index </strong>:   出现index 是 SQL 使用了索引, 但是没有通过索引进行过滤,需要扫描索引上的全部数据 ( <code>查找所有索引树,比ALL快一些,因为索引文件要比数据文件小</code> ), 一般是使用了索引进行排序分组.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L2 <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">id</span>  <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">id</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 该count查询需要通过扫描索引上的全部数据来计数</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">FROM</span> L2;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/80.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<ul>
<li><p><strong>ALL</strong> : 没有使用到任何索引, 连接查询时对于前表的每一行，后表都要被全表扫描。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L3 <span class="keyword">inner</span> <span class="keyword">join</span> L4 <span class="keyword">on</span> L3.title = L4.title ;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/81.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<ul>
<li><p>总结各类type类型的特点:</p>
<p>| <strong>type类型</strong> | <strong>解释</strong>                                                     |<br>| —————— | —————————————————————————————— |<br>| <strong>system</strong>   | <strong>不进行磁盘IO,查询系统表,仅仅返回一条数据</strong>                 |<br>| <strong>const</strong>    | <strong>查找主键索引,最多返回1条或0条数据. 属于精确查找</strong>          |<br>| <strong>eq_ref</strong>   | <strong>查找唯一性索引,返回数据最多一条, 属于精确查找</strong>            |<br>| <strong>ref</strong>      | <strong>查找非唯一性索引,返回匹配某一条件的多条数据,属于精确查找,数据返回可能是多条.</strong> |<br>| <strong>range</strong>    | <strong>查找某个索引的部分索引,只检索给定范围的行,属于范围查找. 比如: &gt; 、 &lt; 、in 、between</strong> |<br>| <strong>index</strong>    | <strong>查找所有索引树,比ALL快一些,因为索引文件要比数据文件小.</strong>   |<br>| <strong>ALL</strong>      | <strong>不使用任何索引,直接进行全表扫描</strong>                          |</p>
</li>
</ul>
<p><strong>5) possible_keys 与 key说明</strong> </p>
<ul>
<li><p>possible_keys </p>
<p><strong>显示可能应用到这张表上的索引</strong>, 一个或者多个. 查询涉及到的字段上若存在索引, 则该索引将被列出, 但不一定被查询实际使用.</p>
</li>
<li><p>key</p>
<p><strong>实际使用的索引</strong>，若为null，则没有使用到索引。（两种可能，1.没建立索引, 2.建立索引，但索引失效）。查询中若使用了覆盖索引，则该索引仅出现在key列表中。</p>
</li>
</ul>
<ol>
<li>理论上没有使用索引,但实际上使用了</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> L3.id <span class="keyword">FROM</span> L3;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/82.jpg" style="width:830px; height:80px"> </p>
<ol>
<li>理论和实际上都没有使用索引</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L3 <span class="keyword">WHERE</span> title = <span class="string">'ruyuan007'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/83.jpg" style="width:830px; height:80px"> </p>
<ol>
<li>理论和实际上都使用了索引</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L2 <span class="keyword">WHERE</span> title = <span class="string">'ruyuan004'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/84.jpg" style="width:830px; height:80px"> </p>
<p><strong>6) key_len字段说明</strong>  </p>
<p>表示索引中使用的字节数, 可以通过该列计算查询中使用索引的长度. </p>
<p>key_len 字段能够帮你检查是否充分利用了索引   <strong>ken_len 越长, 说明索引使用的越充分</strong> </p>
<ul>
<li><p>创建表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> L5(</span><br><span class="line">	a <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>, </span><br><span class="line">	b <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line">	c <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>, </span><br><span class="line">    d <span class="built_in">CHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用explain 进行测试</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L5 <span class="keyword">WHERE</span> a &gt; <span class="number">1</span> <span class="keyword">AND</span> b = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p><strong>观察key_len的值, 索引中只包含了1列 是int类型 ,所以,key_len是4字节。</strong> </p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/85.jpg" style="width:830px; height:80px"> </p>
</li>
<li><p>为b字段添加索引,进行测试</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> L5 <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_b(b);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 执行SQL,这次将b字段也作为条件</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L5 <span class="keyword">WHERE</span> a &gt; <span class="number">1</span> <span class="keyword">AND</span> b = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p><strong>两列都使用了索引,所以,这里ken_len是8。</strong> </p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/86.jpg" style="width:830px; height:80px"> </p>
</li>
<li><p>为c、d字段添加联合索引,然后进行测试</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> L5 <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_c_b(c,d);</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> L5 <span class="keyword">where</span> c = <span class="number">1</span> <span class="keyword">and</span> d = <span class="string">''</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/87.jpg" style="width:830px; height:80px"> </p>
<p><strong>c字段是int类型 4个字节, d字段是 char(10)代表的是10个字符相当30个字节</strong> </p>
<blockquote>
<p>数据库的字符集是utf8 一个字符3个字节,d字段是 char(10)代表的是10个字符相当30个字节,多出的一个字节用来表示是联合索引</p>
</blockquote>
</li>
</ul>
<p>  下面这个例子中,虽然使用了联合索引,但是可以根据ken_len的长度推测出该联合索引只使用了一部分,没有充分利用索引,还有优化空间.</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> L5 <span class="keyword">where</span> c = <span class="number">1</span> ;</span><br></pre></td></tr></table></figure>
<p>  <img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/88.jpg" style="width:830px; height:80px"> </p>
<p><strong>7) ref 字段说明</strong>  </p>
<p>显示索引的哪一列被使用了，如果可能的话，是一个常数。哪些列或常量被用于查找索引列上的值</p>
<ul>
<li><strong>L1.id=’1’; 1是常量 , ref = const</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L1 <span class="keyword">WHERE</span>  L1.id=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/89.jpg" style="width:830px; height:80px"> </p>
<p><strong>8) rows 字段说明</strong>  </p>
<p>表示MySQL根据表统计信息及索引选用情况,估算的找到所需的记录所需要读取的行数</p>
<ul>
<li>L3中的title没有添加索引, 所以L3中有3条记录,就需要读取3条记录进行查找.</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> L3,L4 <span class="keyword">WHERE</span> L3.id = L4.id <span class="keyword">AND</span> L3.title <span class="keyword">LIKE</span> <span class="string">'ruyuan007'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/90.jpg" style="width:830px; height:80px">  </p>
<blockquote>
<p>需要注意的是 rows只是一个估算值,并不准确 .所以rows行数过大的问题并不值得过多考虑，主要分析的还是索引是否使用正确了</p>
</blockquote>
<p><strong>9) filtered 字段说明</strong> </p>
<ul>
<li>它指返回结果的行占需要读到的行(rows列的值)的百分比</li>
</ul>
<p><strong>10) extra 字段说明 </strong></p>
<p>Extra 是 EXPLAIN 输出中另外一个很重要的列，该列显示MySQL在查询过程中的一些详细信息.</p>
<ul>
<li>准备数据</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">users</span> (</span><br><span class="line">	uid <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">	uname <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	age <span class="built_in">INT</span>(<span class="number">11</span>)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span> <span class="keyword">VALUES</span>(<span class="literal">NULL</span>, <span class="string">'lisa'</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span> <span class="keyword">VALUES</span>(<span class="literal">NULL</span>, <span class="string">'lisa'</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span> <span class="keyword">VALUES</span>(<span class="literal">NULL</span>, <span class="string">'rose'</span>,<span class="number">11</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span> <span class="keyword">VALUES</span>(<span class="literal">NULL</span>, <span class="string">'jack'</span>, <span class="number">12</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span> <span class="keyword">VALUES</span>(<span class="literal">NULL</span>, <span class="string">'sam'</span>, <span class="number">13</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>Using filesort</strong></p>
<p>执行结果Extra为<code>Using filesort</code>，这说明，得到所需结果集，需要对所有记录进行文件排序。这类SQL语句性能极差，需要进行优化。</p>
<p>典型的，在一个没有建立索引的列上进行了order by，就会触发filesort，常见的优化方案是，在order by的列上添加索引，避免每次查询都全量排序。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> age;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/91.jpg" style="width:830px; height:80px"> </p>
</li>
<li><p><strong>Using temporary</strong></p>
<p>表示MySQL需要使用临时表来存储结果集，常见于排序和分组查询  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*),uname <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> uname;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/92.jpg" style="width:830px; height:80px"> </p>
</li>
<li><p><strong>Using where</strong></p>
<p>意味着全表扫描或者在查找使用索引的情况下,但是还有查询条件不在索引字段当中.</p>
<p><strong>需要注意的是：</strong></p>
<ol>
<li>返回所有记录的SQL，不使用where条件过滤数据，大概率不符合预期，对于这类SQL往往需要进行优化；</li>
<li>使用了where条件的SQL，并不代表不需要优化，往往需要配合explain结果中的type（连接类型）来综合判断。例如本例查询的 age 未设置索引，所以返回的type为ALL，仍有优化空间，可以建立索引优化查询。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> age=<span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/93.jpg" style="width:830px; height:80px"> </p>
</li>
<li><p><strong>Using index</strong></p>
<p>表示直接访问索引就能够获取到所需要的数据(覆盖索引) , 不需要通过索引回表.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 为uname创建索引</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">users</span> <span class="keyword">add</span> <span class="keyword">index</span> idx_uname(uname);</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> uid,uname <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> uname=<span class="string">'lisa'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/94.jpg" style="width:830px; height:80px"> </p>
</li>
<li><p><strong>Using join buffer</strong></p>
<p>使用了连接缓存, 会显示join连接查询时,MySQL选择的查询算法  .</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> u1 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> age = <span class="number">1</span>) u2 <span class="keyword">ON</span> u1.age = u2.age;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/95.jpg" style="width:830px; height:80px">  </p>
<p><code>Using join buffer (Block Nested Loop)</code> 说明，需要进行嵌套循环计算, 这里每个表都有五条记录，内外表查询的type都为ALL。</p>
<p>问题在于 两个关联表的关联使用了字段 age，并且age字段未建立索引，就会出现这种情况。</p>
</li>
<li><p><strong>Using index condition</strong></p>
<p>查找使用了索引 (但是只使用了一部分,一般是指联合索引)，但是需要回表查询数.     </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> L5 <span class="keyword">where</span> c &gt; <span class="number">10</span> <span class="keyword">and</span> d = <span class="string">''</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/012.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<p><strong>Extra主要指标的含义(有时会同时出现)</strong></p>
<ul>
<li><code>using index</code> ：使用覆盖索引的时候就会出现</li>
<li><code>using where</code>：在查找使用索引的情况下，需要回表去查询所需的数据</li>
<li><code>using index condition</code>：查找使用了索引，但是需要回表查询数据</li>
<li><code>using index &amp; using where</code>：查找使用了索引，但是需要的数据都在索引列中能找到，所以不需要回表查询数据</li>
</ul>
<h3 id="索引优化原则"><a href="#索引优化原则" class="headerlink" title="索引优化原则"></a>索引优化原则</h3><h4 id="1-数据准备"><a href="#1-数据准备" class="headerlink" title="1.数据准备"></a>1.数据准备</h4><p>上面我们学习到了使用explain命令帮助我们分析索引的执行情况，接下来我们继续深入谈谈索引优化的一些原则和具体场景的优化方式。 </p>
<ul>
<li><p>创建数据库、表,插入数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> idx_optimize <span class="built_in">character</span> <span class="keyword">set</span> <span class="string">'utf8'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">users</span>(</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">  user_name <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'姓名'</span>,</span><br><span class="line">  user_age <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">COMMENT</span> <span class="string">'年龄'</span>,</span><br><span class="line">  user_level <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户等级'</span>,</span><br><span class="line">  reg_time <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">COMMENT</span> <span class="string">'注册时间'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span>(user_name,user_age,user_level,reg_time)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'tom'</span>,<span class="number">17</span>,<span class="string">'A'</span>,<span class="keyword">NOW</span>()),(<span class="string">'jack'</span>,<span class="number">18</span>,<span class="string">'B'</span>,<span class="keyword">NOW</span>()),(<span class="string">'lucy'</span>,<span class="number">18</span>,<span class="string">'C'</span>,<span class="keyword">NOW</span>());</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建联合索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">users</span> <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_nal (user_name,user_age,user_level) <span class="keyword">USING</span> BTREE;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2-优化原则详解"><a href="#2-优化原则详解" class="headerlink" title="2.优化原则详解"></a>2.优化原则详解</h4><p><strong>1)最佳左前缀法则</strong>  </p>
<p>最佳左前缀法则:  如果创建的是联合索引,就要遵循该法则. 使用索引时，where后面的条件需要从索引的最左前列开始使用,并且不能跳过索引中的列使用。</p>
<ul>
<li><p>场景1:  按照索引字段顺序使用，三个字段都使用了索引,没有问题。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name = <span class="string">'tom'</span> </span><br><span class="line"><span class="keyword">AND</span> user_age = <span class="number">17</span> <span class="keyword">AND</span> user_level = <span class="string">'A'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/96.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<ul>
<li><p>场景2: 直接跳过user_name使用索引字段，索引无效，未使用到索引。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_age = <span class="number">17</span> <span class="keyword">AND</span> user_level = <span class="string">'A'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/97.jpg" style="width:830px; height:70px">  </p>
</li>
</ul>
<ul>
<li><p>场景3:  不按照创建联合索引的顺序,使用索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> </span><br><span class="line">user_age = <span class="number">17</span> <span class="keyword">AND</span> user_name = <span class="string">'tom'</span> <span class="keyword">AND</span> user_level = <span class="string">'A'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/96.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<p>  where后面查询条件顺序是 <code>user_age</code>、<code>user_level</code>、<code>user_name</code>与我们创建的索引顺序<code>user_name</code>、<code>user_age</code>、<code>user_level</code>不一致，为什么还是使用了索引，原因是因为MySql底层优化器对其进行了优化。</p>
<ul>
<li><p><strong>最佳左前缀底层原理</strong></p>
<p>MySQL创建联合索引的规则是: 首先会对联合索引<strong>最左边</strong>的字段进行<strong>排序</strong>  ( 例子中是 <code>user_name</code> ), <strong>在第一个字段的基础之上</strong> 再对第二个字段进行排序 ( 例子中是 <code>user_age</code> ) .</p>
<p>所以: 最佳左前缀原则其实是和B+树的结构有关系, 最左字段肯定是有序的, 第二个字段则是无序的(<strong>联合索引的排序方式是: 先按照第一个字段进行排序,如果第一个字段相等再根据第二个字段排序</strong>). 所以如果直接使用第二个字段 <code>user_age</code> 通常是使用不到索引的.</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/006.jpg" style="width:630px; height:280px"> </p>
</li>
</ul>
<p><strong>2) 不要在索引列上做任何计算</strong> </p>
<p>不要在索引列上做任何操作，比如计算、使用函数、自动或手动进行类型转换,会导致索引失效，从而使查询转向全表扫描。</p>
<ul>
<li><p>插入数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span>(user_name,user_age,user_level,reg_time) <span class="keyword">VALUES</span>(<span class="string">'11223344'</span>,<span class="number">22</span>,<span class="string">'D'</span>,<span class="keyword">NOW</span>());</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>场景1:  使用系统函数 left()函数,对user_name进行操作</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> <span class="keyword">LEFT</span>(user_name, <span class="number">6</span>) = <span class="string">'112233'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/007.jpg" style="width:630px; height:80px"> </p>
</li>
</ul>
<ul>
<li><p>场景2:  字符串不加单引号 (隐式类型转换)</p>
<p>varchar类型的字段，在查询的时候不加单引号,就需要进行隐式转换, 导致索引失效，转向全表扫描。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name = <span class="number">11223344</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/015.jpg" style="width:830px; height:70px"> </p>
</li>
</ul>
<p><strong>3) 范围之后全失效</strong>  </p>
<p>在编写查询语句时, where条件中如果有范围条件, 并且范围条件之后还有其他过滤条件,   那么范围条件之后的列就都将会索引失效. </p>
<ul>
<li><p>场景1: 条件单独使用user_name时,  <code>type=ref</code>,   <code>key_len=62</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 条件只有一个 user_name</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name = <span class="string">'tom'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/008.jpg" style="width:630px; height:80px"> </p>
</li>
<li><p>场景2: 条件增加一个 user_age ( 使用常量等值) ,<code>type= ref</code>  ,  <code>key_len = 66</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name = <span class="string">'tom'</span> <span class="keyword">AND</span> user_age = <span class="number">17</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/009.jpg" style="width:630px; height:80px"> </p>
</li>
<li><p>场景3: 使用全值匹配, <code>type = ref</code>  , <code>key_len = 128</code>  , 索引都利用上了.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name = <span class="string">'tom'</span> </span><br><span class="line"><span class="keyword">AND</span> user_age = <span class="number">17</span> <span class="keyword">AND</span> user_level = <span class="string">'A'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/010.jpg" style="width:830px; height:80px"> </p>
</li>
<li><p>场景4: 使用范围条件时, avg &gt; 17 , <code>type = range</code>  ,  <code>key_len = 66</code>   , 与场景3 比较,可以发现 <code>user_level</code> 索引没有用上.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name = <span class="string">'tom'</span> </span><br><span class="line"><span class="keyword">AND</span> user_age &gt; <span class="number">17</span> <span class="keyword">AND</span> user_level = <span class="string">'A'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/011.jpg" style="width:830px; height:80px"> </p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/013.jpg" style="width:830px; height:90px">  </p>
</li>
</ul>
<p><strong>4) 避免使用 is null 、 is not null、!= 、or</strong></p>
<ul>
<li><p>使用 <code>is null</code> 会使索引失效</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/014.jpg" style="width:830px; height:80px"> </p>
<blockquote>
<p>Impossible Where:  表示where条件不成立, 不能返回任何行</p>
</blockquote>
</li>
<li><p>使用 <code>is not null</code> 会使索引失效</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/015.jpg" style="width:830px; height:70px"> </p>
</li>
<li><p>使用 <code>!=</code>  和 <code>or</code> 会使索引失效</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name != <span class="string">'tom'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name = <span class="string">'tom'</span> <span class="keyword">or</span> user_name = <span class="string">'jack'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/015.jpg" style="width:830px; height:70px"> </p>
</li>
</ul>
<p><strong>5)  like以%开头会使索引失效</strong></p>
<p>like查询为范围查询，%出现在左边，则索引失效。%出现在右边索引未失效.</p>
<ul>
<li><p>场景1: 两边都有% 或者 字段右边有%,索引都会失效</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">'%tom%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">'%tom'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/016.jpg" style="width:830px; height:70px"> </p>
</li>
</ul>
<ul>
<li><p>场景2: 字段左边有%,索引生效</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">'tom%'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/017.jpg" style="width:830px; height:70px"></p>
</li>
</ul>
<p><strong>解决%出现在左边索引失效的方法</strong></p>
<ul>
<li><p>使用覆盖索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> user_name <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">'%jack%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> user_name,user_age,user_level <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">'%jack%'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/018.jpg" style="width:830px; height:70px"></p>
<p>对比场景1可以知道, 通过使用覆盖索引 <code>type = index</code>,并且 <code>extra = Using index</code>,从全表扫描变成了全索引扫描.</p>
</li>
</ul>
<ul>
<li><p>like 失效的原理</p>
<ol>
<li><p><strong>%号在右:</strong> 由于B+树的索引顺序，是按照首字母的大小进行排序，%号在右的匹配又是匹配首字母。所以可以在B+树上进行有序的查找，查找首字母符合要求的数据。所以有些时候可以用到索引.</p>
</li>
<li><p><strong>%号在左:</strong>  是匹配字符串尾部的数据，我们上面说了排序规则，尾部的字母是没有顺序的，所以不能按照索引顺序查询，就用不到索引.</p>
</li>
<li><p><strong>两个%%号:</strong>  这个是查询任意位置的字母满足条件即可，只有首字母是进行索引排序的，其他位置的字母都是相对无序的，所以查找任意位置的字母是用不上索引的.</p>
</li>
</ol>
</li>
</ul>
<p><strong>索引优化原则总结</strong> </p>
<ul>
<li><strong>最左前缀法则要遵守</strong> </li>
<li><strong>索引列上不计算</strong></li>
<li><strong>范围之后全失效</strong></li>
<li><strong>覆盖索引记住用。</strong></li>
<li><strong>不等于、is null、is not null、or导致索引失效。</strong></li>
<li><strong>like百分号加右边，加左边导致索引失效，解决方法：使用覆盖索引。</strong></li>
</ul>
<h3 id="慢查询日志分析"><a href="#慢查询日志分析" class="headerlink" title="慢查询日志分析"></a>慢查询日志分析</h3><h4 id="1-慢查询设置与测试"><a href="#1-慢查询设置与测试" class="headerlink" title="1.慢查询设置与测试"></a>1.慢查询设置与测试</h4><p><strong>1) 慢查询介绍</strong></p>
<ul>
<li><p>MySQL的慢查询，全名是慢查询日志，是MySQL提供的一种日志记录，用来记录在MySQL中响应时间超过阈值的语句。</p>
</li>
<li><p>默认情况下，MySQL数据库并不启动慢查询日志，需要手动来设置这个参数。</p>
<p><strong>如果不是调优需要的话，一般不建议启动该参数</strong>，因为开启慢查询日志会或多或少带来一定的性能影响。慢查询日志支持将日志记录写入文件和数据库表。</p>
</li>
</ul>
<p><strong>2) 慢查询参数</strong></p>
<ul>
<li><p>执行下面的语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like '%slow_query_log%';</span><br><span class="line">+<span class="comment">---------------------+------------------------------+</span></span><br><span class="line">| Variable_name       | Value                        |</span><br><span class="line">+<span class="comment">---------------------+------------------------------+</span></span><br><span class="line">| slow_query_log      | ON                           |</span><br><span class="line">| slow_query_log_file | /var/lib/mysql/test-slow.log |</span><br><span class="line">+<span class="comment">---------------------+------------------------------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like '%long_query%';</span><br><span class="line">+<span class="comment">-----------------+-----------+</span></span><br><span class="line">| Variable_name   | Value     |</span><br><span class="line">+<span class="comment">-----------------+-----------+</span></span><br><span class="line">| long_query_time | 10.000000 |</span><br><span class="line">+<span class="comment">-----------------+-----------+</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>MySQL 慢查询的相关参数解释：</p>
<ul>
<li><p><strong>slow_query_log</strong>：是否开启慢查询日志，<code>ON(1)</code>表示开启,</p>
<p><code>OFF(0)</code> 表示关闭。  </p>
</li>
<li><p><strong>slow-query-log-file</strong>：新版（5.6及以上版本）MySQL数据库慢查询日志存储路径。</p>
</li>
<li><p><strong>long_query_time</strong>： 慢查询<strong>阈值</strong>，当查询时间多于设定的阈值时，记录日志。</p>
</li>
</ul>
</li>
</ul>
<p><strong>3) 慢查询配置方式</strong></p>
<ol>
<li>默认情况下slow_query_log的值为OFF，表示慢查询日志是禁用的</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like '%slow_query_log%';</span><br><span class="line">+<span class="comment">---------------------+------------------------------+</span></span><br><span class="line">| Variable_name       | Value                        |</span><br><span class="line">+<span class="comment">---------------------+------------------------------+</span></span><br><span class="line">| slow_query_log      | ON                           |</span><br><span class="line">| slow_query_log_file | /var/lib/mysql/test-slow.log |</span><br><span class="line">+<span class="comment">---------------------+------------------------------+</span></span><br></pre></td></tr></table></figure>
<ol>
<li>可以通过设置slow_query_log的值来开启</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global slow_query_log=1;</span><br></pre></td></tr></table></figure>
<ol>
<li>使用<code>set global slow_query_log=1</code>  开启了慢查询日志只对当前数据库生效，MySQL重启后则会失效。如果要永久生效，就必须修改配置文件my.cnf（其它系统变量也是如此）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 编辑配置</span></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加如下内容</span></span><br><span class="line">slow_query_log =1</span><br><span class="line">slow_query_log_file=/var/lib/mysql/ruyuan-slow.log</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重启MySQL</span></span><br><span class="line">service mysqld restart</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like '%slow_query%';</span><br><span class="line">+<span class="comment">---------------------+--------------------------------+</span></span><br><span class="line">| Variable_name       | Value                          |</span><br><span class="line">+<span class="comment">---------------------+--------------------------------+</span></span><br><span class="line">| slow_query_log      | ON                             |</span><br><span class="line">| slow_query_log_file | /var/lib/mysql/ruyuan-slow.log |</span><br><span class="line">+<span class="comment">---------------------+--------------------------------+</span></span><br></pre></td></tr></table></figure>
<ol>
<li>那么开启了慢查询日志后，什么样的SQL才会记录到慢查询日志里面呢？ 这个是由参数 <code>long_query_time</code>控制，默认情况下long_query_time的值为10秒. </li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like 'long_query_time';</span><br><span class="line">+<span class="comment">-----------------+-----------+</span></span><br><span class="line">| Variable_name   | Value     |</span><br><span class="line">+<span class="comment">-----------------+-----------+</span></span><br><span class="line">| long_query_time | 10.000000 |</span><br><span class="line">+<span class="comment">-----------------+-----------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; set global long_query_time=1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;  show variables like 'long_query_time';</span><br><span class="line">+<span class="comment">-----------------+-----------+</span></span><br><span class="line">| Variable_name   | Value     |</span><br><span class="line">+<span class="comment">-----------------+-----------+</span></span><br><span class="line">| long_query_time | 10.000000 |</span><br><span class="line">+<span class="comment">-----------------+-----------+</span></span><br></pre></td></tr></table></figure>
<ol>
<li>修改了变量long_query_time，但是查询变量long_query_time的值还是10，难道没有修改到呢？注意：使用命令 set global long_query_time=1 修改后，需要重新连接或新开一个会话才能看到修改值。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like 'long_query_time';</span><br><span class="line">+<span class="comment">-----------------+----------+</span></span><br><span class="line">| Variable_name   | Value    |</span><br><span class="line">+<span class="comment">-----------------+----------+</span></span><br><span class="line">| long_query_time | 1.000000 |</span><br><span class="line">+<span class="comment">-----------------+----------+</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>log_output</code> 参数是指定日志的存储方式。<code>log_output=&#39;FILE&#39;</code>  表示将日志存入文件，默认值是’FILE’。<code>log_output=&#39;TABLE&#39;</code> 表示将日志存入数据库，这样日志信息就会被写入到 mysql.slow_log 表中。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW VARIABLES LIKE '%log_output%';</span><br><span class="line">+<span class="comment">---------------+-------+</span></span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+<span class="comment">---------------+-------+</span></span><br><span class="line">| log_output    | FILE  |</span><br><span class="line">+<span class="comment">---------------+-------+</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>MySQL数据库支持同时两种日志存储方式，配置的时候以逗号隔开即可，如：log_output=’FILE,TABLE’。日志记录到系统的专用日志表中，要比记录到文件耗费更多的系统资源，因此对于需要启用慢查询日志，又需要能够获得更高的系统性能，那么建议优先记录到文件.</p>
</blockquote>
<ol>
<li>系统变量 <code>log-queries-not-using-indexes</code>：未使用索引的查询也被记录到慢查询日志中（可选项）。如果调优的话，建议开启这个选项。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like 'log_queries_not_using_indexes';</span><br><span class="line">+<span class="comment">-------------------------------+-------+</span></span><br><span class="line">| Variable_name                 | Value |</span><br><span class="line">+<span class="comment">-------------------------------+-------+</span></span><br><span class="line">| log_queries_not_using_indexes | OFF   |</span><br><span class="line">+<span class="comment">-------------------------------+-------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; set global log_queries_not_using_indexes=1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like 'log_queries_not_using_indexes';</span><br><span class="line">+<span class="comment">-------------------------------+-------+</span></span><br><span class="line">| Variable_name                 | Value |</span><br><span class="line">+<span class="comment">-------------------------------+-------+</span></span><br><span class="line">| log_queries_not_using_indexes | ON    |</span><br><span class="line">+<span class="comment">-------------------------------+-------+</span></span><br></pre></td></tr></table></figure>
<p><strong>3) 慢查询测试</strong> </p>
<ol>
<li>执行 test_index.sql 脚本,监控慢查询日志内容</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# tail -f /var/lib/mysql/ruyuan-slow.log </span><br><span class="line">/usr/sbin/mysqld, Version: 5.7.30-log (MySQL Community Server (GPL)). started with:</span><br><span class="line">Tcp port: 0  Unix socket: /var/lib/mysql/mysql.sock</span><br><span class="line">Time                 Id Command    Argument</span><br></pre></td></tr></table></figure>
<ol>
<li>执行下面的SQL,执行超时 (超过1秒) 我们去查看慢查询日志</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> test_index <span class="keyword">WHERE</span>  </span><br><span class="line">hobby = <span class="string">'20009951'</span> <span class="keyword">OR</span> hobby = <span class="string">'10009931'</span> <span class="keyword">OR</span> hobby = <span class="string">'30009931'</span> </span><br><span class="line"><span class="keyword">OR</span> dname = <span class="string">'name4000'</span> <span class="keyword">OR</span> dname = <span class="string">'name6600'</span> ;</span><br></pre></td></tr></table></figure>
<ol>
<li>日志内容</li>
</ol>
<p>我们得到慢查询日志后，最重要的一步就是去分析这个日志。我们先来看下慢日志里到底记录了哪些内容。</p>
<p>如下图是慢日志里其中一条SQL的记录内容，可以看到有时间戳，用户，查询时长及具体的SQL等信息.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Time: 2022-02-23T13:50:45.005959Z</span></span><br><span class="line"><span class="comment"># User@Host: root[root] @ localhost []  Id:     3</span></span><br><span class="line"><span class="comment"># Query_time: 3.724273  Lock_time: 0.000371 Rows_sent: 5  Rows_examined: 5000000</span></span><br><span class="line"><span class="keyword">SET</span> <span class="built_in">timestamp</span>=<span class="number">1645624245</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> test_index <span class="keyword">where</span> hobby = <span class="string">'20009951'</span> <span class="keyword">or</span> hobby = <span class="string">'10009931'</span> <span class="keyword">or</span> hobby = <span class="string">'30009931'</span> <span class="keyword">or</span> dname = <span class="string">'name4000'</span> <span class="keyword">or</span> dname = <span class="string">'name6600'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>Time: 执行时间</li>
<li>User: 用户信息 ,Id信息</li>
<li>Query_time: 查询时长</li>
<li>Lock_time: 等待锁的时长</li>
<li>Rows_sent:查询结果的行数</li>
<li>Rows_examined: 查询扫描的行数</li>
<li>SET timestamp: 时间戳</li>
<li>SQL的具体信息</li>
</ul>
<h4 id="2-慢查询SQL优化思路"><a href="#2-慢查询SQL优化思路" class="headerlink" title="2.慢查询SQL优化思路"></a>2.慢查询SQL优化思路</h4><p><strong>1) SQL性能下降的原因</strong></p>
<p>在日常的运维过程中，经常会遇到DBA将一些执行效率较低的SQL发过来找开发人员分析，当我们拿到这个SQL语句之后，在对这些SQL进行分析之前，需要明确可能导致SQL执行性能下降的原因进行分析，执行性能下降可以体现在以下两个方面： </p>
<ul>
<li><p><strong>等待时间长</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">锁表导致查询一直处于等待状态，后续我们从MySQL锁的机制去分析SQL执行的原理</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>执行时间长</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.查询语句写的烂</span><br><span class="line">2.索引失效 </span><br><span class="line">3.关联查询太多join </span><br><span class="line">4.服务器调优及各个参数的设置</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>2) 慢查询优化思路</strong></p>
<ol>
<li><p>优先选择优化高并发执行的SQL,因为高并发的SQL发生问题带来后果更严重.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">比如下面两种情况:</span><br><span class="line">   SQL1: 每小时执行10000次, 每次20个IO 优化后每次18个IO,每小时节省2万次IO</span><br><span class="line">   SQL2: 每小时10次,每次20000个IO,每次优化减少2000个IO,每小时节省2万次IO</span><br><span class="line">   SQL2更难优化,SQL1更好优化.但是第一种属于高并发SQL,更急需优化 成本更低</span><br></pre></td></tr></table></figure>
</li>
<li><p>定位优化对象的性能瓶颈(在优化之前了解性能瓶颈在哪)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在去优化SQL时,选择优化分方向有三个: </span><br><span class="line">  1.IO(数据访问消耗的了太多的时间,查看是否正确使用了索引) , </span><br><span class="line">  2.CPU(数据运算花费了太多时间, 数据的运算分组 排序是不是有问题) </span><br><span class="line">  3.网络带宽(加大网络带宽)</span><br></pre></td></tr></table></figure>
</li>
<li><p>明确优化目标</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">需要根据数据库当前的状态</span><br><span class="line">数据库中与该条SQL的关系</span><br><span class="line">当前SQL的具体功能</span><br><span class="line">最好的情况消耗的资源,最差情况下消耗的资源,优化的结果只有一个给用户一个好的体验</span><br></pre></td></tr></table></figure>
</li>
<li><p>从explain执行计划入手</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">只有explain能告诉你当前SQL的执行状态</span><br></pre></td></tr></table></figure>
</li>
<li><p>永远用小的结果集驱动大的结果集</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">小的数据集驱动大的数据集,减少内层表读取的次数</span><br><span class="line"></span><br><span class="line">类似于嵌套循环</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">如果小的循环在外层,对于数据库连接来说就只连接<span class="number">5</span>次,进行<span class="number">5000</span>次操作,如果<span class="number">1000</span>在外,则需要进行<span class="number">1000</span>次数据库连接,从而浪费资源，增加消耗.这就是为什么要小表驱动大表。</span><br></pre></td></tr></table></figure>
</li>
<li><p>尽可能在索引中完成排序    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">排序操作用的比较多,order by 后面的字段如果在索引中,索引本来就是排好序的,所以速度很快,没有索引的话,就需要从表中拿数据,在内存中进行排序,如果内存空间不够还会发生落盘操作</span><br></pre></td></tr></table></figure>
</li>
<li><p>只获取自己需要的列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不要使用select  * ,select * 很可能不走索引,而且数据量过大</span><br></pre></td></tr></table></figure>
</li>
<li><p>只使用最有效的过滤条件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">误区 where后面的条件越多越好,但实际上是应该用最短的路径访问到数据</span><br></pre></td></tr></table></figure>
</li>
<li><p>尽可能避免复杂的join和子查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">每条SQL的JOIN操作 建议不要超过三张表</span><br><span class="line">将复杂的SQL, 拆分成多个小的SQL 单个表执行,获取的结果 在程序中进行封装</span><br><span class="line">如果join占用的资源比较多,会导致其他进程等待时间变长</span><br></pre></td></tr></table></figure>
</li>
<li><p>合理设计并利用索引</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">如何判定是否需要创建索引?</span><br><span class="line">    1.较为频繁的作为查询条件的字段应该创建索引.</span><br><span class="line">    2.唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件.（唯一性太差的字段主要是指哪些呢？如状态字段，类型字段等等这些字段中的数据可能总共就是那么几个几十个数值重复使用）（当一条Query所返回的数据超过了全表的15%的时候，就不应该再使用索引扫描来完成这个Query了）.</span><br><span class="line">    3.更新非常频繁的字段不适合创建索引.（因为索引中的字段被更新的时候，不仅仅需要更新表中的数据，同时还要更新索引数据，以确保索引信息是准确的）.</span><br><span class="line">    4.不会出现在WHERE子句中的字段不该创建索引.</span><br><span class="line"></span><br><span class="line">如何选择合适索引?</span><br><span class="line">    1.对于单键索引，尽量选择针对当前Query过滤性更好的索引.</span><br><span class="line">    2.选择联合索引时,当前Query中过滤性最好的字段在索引字段顺序中排列要靠前.</span><br><span class="line">    3.选择联合索引时,尽量索引字段出现在w中比较多的索引.</span><br></pre></td></tr></table></figure>
<h3 id="JOIN优化"><a href="#JOIN优化" class="headerlink" title="JOIN优化"></a>JOIN优化</h3><h4 id="1-JOIN算法原理"><a href="#1-JOIN算法原理" class="headerlink" title="1.JOIN算法原理"></a>1.JOIN算法原理</h4><p><strong>1) JOIN回顾</strong></p>
<p>JOIN 是 MySQL 用来进行联表操作的，用来匹配两个表的数据，筛选并合并出符合我们要求的结果集。</p>
<p>JOIN 操作有多种方式，取决于最终数据的合并效果。常用连接方式的有以下几种:</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/99.jpg" style="width:530px; height:270px"> </p>
<p><strong>2) 驱动表的定义</strong></p>
<p>什么是驱动表 ?</p>
<ul>
<li>多表关联查询时,第一个被处理的表就是驱动表,使用驱动表去关联其他表.</li>
<li>驱动表的确定非常的关键,会直接影响多表关联的顺序,也决定后续关联查询的性能</li>
</ul>
<p>驱动表的选择要遵循一个规则:</p>
<ul>
<li>在对最终的结果集没有影响的前提下,优先选择结果集最小的那张表作为驱动表</li>
</ul>
<p><strong>3) 三种JOIN算法</strong></p>
<p><strong>1.Simple Nested-Loop Join（ 简单的嵌套循环连接 </strong>) </p>
<ul>
<li><p>简单来说嵌套循环连接算法就是一个双层for 循环 ，通过循环外层表的行数据，逐个与内层表的所有行数据进行比较来获取结果.</p>
</li>
<li><p><strong>这种算法是最简单的方案，性能也一般。对内循环没优化。</strong></p>
</li>
<li><p>例如有这样一条SQL:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 连接用户表与订单表 连接条件是 u.id = o.user_id</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> t1 <span class="keyword">left</span> <span class="keyword">join</span> <span class="keyword">order</span> t2 <span class="keyword">on</span> t1.id = t2.user_id;</span><br><span class="line"><span class="comment">-- user表为驱动表,order表为被驱动表</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>转换成代码执行时的思路是这样的: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(user表行 uRow : user表)&#123;</span><br><span class="line">    <span class="keyword">for</span>(Order表的行 oRow : order表)&#123;</span><br><span class="line">        <span class="keyword">if</span>(uRow.id = oRow.user_id)&#123;</span><br><span class="line">            <span class="keyword">return</span> uRow;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匹配过程如下图</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/100.jpg" style="width:630px; height:270px"> </p>
</li>
<li><p>SNL 的特点</p>
<ul>
<li>简单粗暴容易理解，就是通过双层循环比较数据来获得结果</li>
<li>查询效率会非常慢,假设 A 表有 N 行，B 表有 M 行。SNL 的开销如下：<ul>
<li>A 表扫描 1 次。</li>
<li>B 表扫描 M 次。</li>
<li>一共有 N 个内循环，每个内循环要 M 次，一共有内循环 N * M 次</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>2) Index Nested-Loop Join（ 索引嵌套循环连接 ）</strong></p>
<ul>
<li><p>Index Nested-Loop Join 其优化的思路:  <strong>主要是为了减少内层表数据的匹配次数</strong> , 最大的区别在于，用来进行 join 的字段已经在被驱动表中建立了索引。</p>
</li>
<li><p>从原来的  <code>匹配次数 = 外层表行数 * 内层表行数</code> , 变成了  <code>匹配次数 = 外层表的行数 * 内层表索引的高度</code>  ，极大的提升了 join的性能。</p>
</li>
<li><p>当  <code>order</code>  表的   <code>user_id</code>  为索引的时候执行过程会如下图：</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/102.jpg" style="width:630px; height:270px"> </p>
<p><strong>注意：使用Index Nested-Loop Join 算法的前提是匹配的字段必须建立了索引。</strong> </p>
</li>
</ul>
<p><strong>3) Block Nested-Loop Join( 块嵌套循环连接 )</strong> </p>
<ul>
<li><p>如果 join 的字段有索引，MySQL 会使用 INL 算法。如果没有的话，MySQL 会如何处理？</p>
</li>
<li><p>因为不存在索引了，所以被驱动表需要进行扫描。这里 MySQL 并不会简单粗暴的应用 SNL 算法，而是加入了 buffer 缓冲区，降低了内循环的个数，也就是被驱动表的扫描次数。</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/103.jpg" style="width:630px; height:270px"> </p>
<ul>
<li><p>在外层循环扫描 user表中的所有记录。扫描的时候，会把需要进行 join 用到的列都缓存到 buffer 中。buffer 中的数据有一个特点，里面的记录不需要一条一条地取出来和 order 表进行比较，而是整个 buffer 和 order表进行批量比较。</p>
</li>
<li><p>如果我们把 buffer 的空间开得很大，可以容纳下 user 表的所有记录，那么 order 表也只需要访问一次。</p>
</li>
<li><p>MySQL 默认 buffer 大小 256K，如果有 n 个 join 操作，会生成 n-1 个 join buffer。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like '%join_buffer%';</span><br><span class="line">+<span class="comment">------------------+--------+</span></span><br><span class="line">| Variable_name    | Value  |</span><br><span class="line">+<span class="comment">------------------+--------+</span></span><br><span class="line">| join_buffer_size | 262144 |</span><br><span class="line">+<span class="comment">------------------+--------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; set session join_buffer_size=262144;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><strong>4) 总结</strong></p>
<ol>
<li><p>永远用小结果集驱动大结果集(其本质就是减少外层循环的数据数量)</p>
</li>
<li><p>为匹配的条件增加索引(减少内层表的循环匹配次数)</p>
</li>
<li><p>增大join buffer size的大小（一次缓存的数据越多，那么内层包的扫表次数就越少）</p>
</li>
<li><p>减少不必要的字段查询（字段越少，join buffer 所缓存的数据就越多</p>
</li>
</ol>
<h4 id="2-in和exists函数"><a href="#2-in和exists函数" class="headerlink" title="2.in和exists函数"></a>2.in和exists函数</h4><p>上面我们说了 小表驱动大表,就是小的数据集驱动大的数据集, 主要是为了减少数据库的连接次数,根据具体情况的不同,又出现了两个函数 <code>exists</code> 和 <code>in</code>  函数</p>
<p>创建部门表与员工表,并插入数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 部门表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> department (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">11</span>) PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">  deptName <span class="built_in">VARCHAR</span>(<span class="number">30</span>) ,</span><br><span class="line">  address <span class="built_in">VARCHAR</span>(<span class="number">40</span>) </span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 部门表测试数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`department`</span> <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">'研发部'</span>, <span class="string">'1层'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`department`</span> <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">'人事部'</span>, <span class="string">'3层'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`department`</span> <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">'市场部'</span>, <span class="string">'4层'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`department`</span> <span class="keyword">VALUES</span> (<span class="number">5</span>, <span class="string">'财务部'</span>, <span class="string">'2层'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employee (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">11</span>) PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">  <span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) ,</span><br><span class="line">  dep_id <span class="built_in">INT</span>(<span class="number">11</span>) ,</span><br><span class="line">  age <span class="built_in">INT</span>(<span class="number">11</span>) ,</span><br><span class="line">  salary <span class="built_in">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表测试数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`employee`</span> <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">'鲁班'</span>, <span class="number">1</span>, <span class="number">15</span>, <span class="number">1000.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`employee`</span> <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">'后裔'</span>, <span class="number">1</span>, <span class="number">22</span>, <span class="number">2000.00</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`employee`</span> <span class="keyword">VALUES</span> (<span class="number">4</span>, <span class="string">'阿凯'</span>, <span class="number">2</span>, <span class="number">20</span>, <span class="number">3000.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`employee`</span> <span class="keyword">VALUES</span> (<span class="number">5</span>, <span class="string">'露娜'</span>, <span class="number">2</span>, <span class="number">30</span>, <span class="number">3500.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`employee`</span> <span class="keyword">VALUES</span> (<span class="number">6</span>, <span class="string">'李白'</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">5000.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`employee`</span> <span class="keyword">VALUES</span> (<span class="number">7</span>, <span class="string">'韩信'</span>, <span class="number">3</span>, <span class="number">50</span>, <span class="number">5000.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`employee`</span> <span class="keyword">VALUES</span> (<span class="number">8</span>, <span class="string">'蔡文姬'</span>, <span class="number">3</span>, <span class="number">35</span>, <span class="number">4000.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`employee`</span> <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">'孙尚香'</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">2500.00</span>);</span><br></pre></td></tr></table></figure>
<p><strong>1) in 函数</strong></p>
<ul>
<li>假设: department表的数据小于 employee表数据, 将所有部门下的员工都查出来,应该使用 in 函数</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 编写SQL,使in 函数</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employee e <span class="keyword">WHERE</span> e.dep_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> department);</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>in函数的执行原理</strong> </p>
<ol>
<li><code>in</code> 语句, 只执行一次, 将 <code>department</code>  表中的所有id字段查询出来并且缓存.</li>
<li>检查 <code>department</code>  表中的id与 <code>employee</code> 表中的    <code>dep_id</code> 是否相等, 如果相等 添加到结果集, 直到遍历完<code>department</code>  所有的记录.</li>
</ol>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/028.jpg" style="width:630px; height:270px"> </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 先循环: select id from department; 相当于得到了小表的数据</span></span><br><span class="line">for(i = 0; i &lt; $dept.length; i++)&#123;  -- 小表</span><br><span class="line">	<span class="comment">-- 后循环: select * from employee where e.dep_id  = d.id;</span></span><br><span class="line">	for(j = 0 ; j &lt; $emp.legth; j++)&#123;  -- 大表</span><br><span class="line">	</span><br><span class="line">		if($dept[i].id == $emp[j].dep_id)&#123;</span><br><span class="line">			$result[i] = $emp[j]</span><br><span class="line">			break;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>结论:  <strong>如果子查询得出的结果集记录较少，主查询中的表较大且又有索引时应该用 <code>in</code></strong></p>
</li>
</ul>
<p><strong>2) exists 函数</strong></p>
<ul>
<li><p>假设: department表的数据大于 employee表数据, 将所有部门下的的员工都查出来,应该使用 exists 函数.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employee e <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> </span><br><span class="line">(<span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> department d <span class="keyword">WHERE</span> d.id = e.dep_id);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>exists</code>   特点</p>
<p><code>exists</code> 子句返回的是一个 布尔值，如果有返回数据，则返回值是<code>true</code>，反之是<code>false</code>。</p>
<p>如果结果为 <code>true</code>  , 外层的查询语句会进行匹配,否则 外层查询语句将不进行查询或者查不出任何记录。</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/104.jpg" style="width:630px; height:80px"> </p>
</li>
<li><p>exists 函数的执行原理</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 先循环: SELECT * FROM employee e;</span></span><br><span class="line"><span class="comment">-- 再判断: SELECT id FROM department d WHERE d.id = e.dep_id</span></span><br><span class="line"></span><br><span class="line">for(j = 0; j &lt; $emp.length; j++)&#123;  -- 小表</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 遍历循环外表，检查外表中的记录有没有和内表的的数据一致的, 匹配得上就放入结果集。</span></span><br><span class="line">	if(exists(emp[i].dep_id))&#123;   -- 大表</span><br><span class="line">		$result[i] = $emp[i];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>3) in 和 exists 的区别</strong> </p>
<ul>
<li><p>如果子查询得出的结果集记录较少，主查询中的表较大且又有索引时应该用 <code>in</code></p>
</li>
<li><p>如果主查询得出的结果集记录较少，子查询中的表较大且又有索引时应该用  <code>exists</code></p>
</li>
<li><p>一句话:  <strong>in后面跟的是小表，exists后面跟的是大表。</strong></p>
</li>
</ul>
<h3 id="order-by优化"><a href="#order-by优化" class="headerlink" title="order by优化"></a>order by优化</h3><p>MySQL中的两种排序方式</p>
<ul>
<li>索引排序: 通过有序索引顺序扫描直接返回有序数据</li>
<li>额外排序: 对返回的数据进行文件排序</li>
<li>ORDER BY优化的核心原则: <strong>尽量减少额外的排序，通过索引直接返回有序数据。</strong></li>
</ul>
<h4 id="1-索引排序"><a href="#1-索引排序" class="headerlink" title="1.索引排序"></a>1.索引排序</h4><p>因为索引的结构是B+树，索引中的数据是按照一定顺序进行排列的，所以在排序查询中如果能利用索引，就能避免额外的排序操作。EXPLAIN分析查询时，Extra显示为Using index。</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/105.jpg" style="width:630px; height:280px"> </p>
<p>比如查询条件是 <code>where age = 21 order by name</code>，那么查询过程就是会找到满足 <code>age = 21</code> 的记录，而符合这条的所有记录一定是按照 name 排序的，所以也不需要额外进行排序.</p>
<h4 id="2-额外排序"><a href="#2-额外排序" class="headerlink" title="2.额外排序"></a>2.额外排序</h4><p>所有不是通过索引直接返回排序结果的操作都是Filesort排序，也就是说进行了额外的排序操作。EXPLAIN分析查询时，Extra显示为Using filesort。</p>
<p><strong>1) 按执行位置划分</strong> </p>
<ul>
<li><p>Sort_Buffer<br>MySQL 为每个线程各维护了一块内存区域 sort_buffer ，用于进行排序。sort_buffer 的大小可以通过 sort_buffer_size 来设置。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like '%sort_buffer_size%';</span><br><span class="line">+<span class="comment">-------------------------+---------+</span></span><br><span class="line">| Variable_name           | Value   |</span><br><span class="line">+<span class="comment">-------------------------+---------+</span></span><br><span class="line">| sort_buffer_size        | 262144  |</span><br><span class="line">+<span class="comment">-------------------------+---------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; select 262144 / 1024;</span><br><span class="line">+<span class="comment">---------------+</span></span><br><span class="line">| 262144 / 1024 |</span><br><span class="line">+<span class="comment">---------------+</span></span><br><span class="line">|      256.0000 |</span><br><span class="line">+<span class="comment">---------------+</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注: sort_Buffer_Size 并不是越大越好，由于是connection级的参数，过大的设置+高并发可能会耗尽系统内存资源。</p>
</blockquote>
</li>
<li><p>Sort_Buffer + 临时文件</p>
<p>如果加载的记录字段总长度（可能是全字段也可能是 rowid排序的字段）小于 sort_buffer_size 便使用 sort_buffer 排序；如果超过则使用 sort_buffer + 临时文件进行排序。</p>
<p>临时文件种类：</p>
<p>临时表种类由参数 tmp_table_size 与临时表大小决定，如果内存临时表大小超过 tmp_table_size ，那么就会转成磁盘临时表。因为磁盘临时表在磁盘上，所以使用内存临时表的效率是大于磁盘临时表的。</p>
</li>
</ul>
<p><strong>2) 按执行方式划分</strong> </p>
<p>执行方式是由 <code>max_length_for_sort_data</code> 参数与用于排序的单条记录字段长度决定的，如果用于排序的单条记录字段长度 <code>&lt;= max_length_for_sort_data</code> ，就使用全字段排序；反之则使用 rowid 排序。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like 'max_length_for_sort_data';</span><br><span class="line">+<span class="comment">--------------------------+-------+</span></span><br><span class="line">| Variable_name            | Value |</span><br><span class="line">+<span class="comment">--------------------------+-------+</span></span><br><span class="line">| max_length_for_sort_data | 1024  |</span><br><span class="line">+<span class="comment">--------------------------+-------+</span></span><br></pre></td></tr></table></figure>
<p><strong>2.1) 全字段排序</strong> </p>
<p>全字段排序就是将查询的所有字段全部加载进来进行排序。</p>
<p>优点：查询快，执行过程简单<br>缺点：需要的空间大。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">name</span>,age,<span class="keyword">add</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> addr = <span class="string">'北京'</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">name</span> <span class="keyword">limit</span> <span class="number">1000</span>; <span class="comment">-- addr有索引</span></span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/107.jpg" style="width:630px; height:380px">  </p>
<p>上面查询语句的执行流程:</p>
<ol>
<li><p>初始化 sort_buffer，确定放入 name、age、addr 这3个字段。</p>
</li>
<li><p>从索引 addr 中找到第一个满足 addr=’北京’ 的主键ID（ID_x）。</p>
</li>
<li><p>到主键索引中找到 ID_x，取出整行，取 name、addr、age 3个字段的值，存入 sort_buffer。</p>
</li>
<li><p>从索引 addr 取下一个记录的主键ID。</p>
</li>
<li><p>重复3、4，直到 addr 值不满足条件。</p>
</li>
<li><p>对 sort_buffer 中的数据按照 name 做快速排序。</p>
</li>
<li><p>把排序结果中的前1000行返回给客户端。</p>
</li>
</ol>
<p><strong>2.2) rowid排序</strong>  </p>
<p>rowid 排序相对于全字段排序，不会把所有字段都放入sort_buffer。所以在sort buffer中进行排序之后还得回表查询。</p>
<p>缺点：会产生更多次数的回表查询，查询可能会慢一些。 </p>
<p>优点：所需的空间更小</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">name</span>,age,<span class="keyword">add</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> addr = <span class="string">'北京'</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">name</span> <span class="keyword">limit</span> <span class="number">1000</span>; <span class="comment">-- addr有索引</span></span><br></pre></td></tr></table></figure>
<p>假设 name、age、addr3个字段定义的总长度为36，而 max_length_for_sort_data = 16，就是单行的长度超了，MySQL认为单行太大，需要换一个算法。<br>放入 sort_buffer 的字段就会只有要排序的字段 name，和主键 id，那么排序的结果中就少了 addr 和 age，就需要回表了。</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/108.jpg" style="width:630px; height:380px"> </p>
<p>上面查询语句的执行流程:</p>
<ol>
<li>初始化 sort_buffer，确定放入2个字段，name 和 id。</li>
<li>从索引 addr 中找到第一个满足addr=’北京’的主键ID（ID_x）。</li>
<li>到主键索引中取出整行，把 name、id 这2个字段放入 sort_buffer。</li>
<li>从索引 addr 取下一个记录的主键ID。</li>
<li>重复3、4，直到addr值不满足条件。</li>
<li>对 sort_buffer 中的数据按照 name 做快速排序。</li>
<li>取排序结果中的前1000行，并按照 id 的值到原表中取出 name、age、addr 3个字段的值返回给客户端。</li>
</ol>
<p><strong>总结</strong></p>
<ul>
<li><p>如果 MySQL 认为内存足够大，会优先选择全字段排序，把需要的字段都放到 sort_buffer中， 这样排序后就会直接从内存里面返回查询结果了，不用再回到原表去取数据。</p>
</li>
<li><p>MySQL 的一个设计思想：如果内存够，就要多利用内存，尽量减少磁盘访问。 对于 InnoDB 表来说，rowid 排序会要求回表多造成磁盘读，因此不会被优先选择。</p>
</li>
</ul>
<h4 id="3-排序优化"><a href="#3-排序优化" class="headerlink" title="3.排序优化"></a>3.排序优化</h4><p><strong>添加索引</strong></p>
<ul>
<li><p>为 <code>employee</code> 表 创建索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 联合索引</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_name_age(<span class="keyword">NAME</span>,age);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为薪资字段添加索引</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_salary(salary);</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看  <code>employee</code> 表的索引情况</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> employee;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/020.jpg" style="width:730px; height:150px"> </p>
</li>
</ul>
<p><strong>场景1:  只查询用于排序的 索引字段, 可以利用索引进行排序,最左原则 </strong> </p>
<ul>
<li><p>查询 <code>name, age</code>  两个字段, 并使用 <code>name</code> 与 <code>age</code> 行排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.name, e.age <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.name,e.age;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/021.jpg" style="width:730px; height:100px"> </p>
</li>
</ul>
<p><strong>场景2:  排序字段在多个索引中,无法使用索引排序</strong></p>
<ul>
<li><p>查询 <code>name , salary</code> 字段, 并使用 <code>name</code> 与 <code>salary</code> 排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.name, e.salary <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.name,e.salary;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/022.jpg" style="width:730px; height:100px"></p>
</li>
</ul>
<p><strong>场景3: 只查询用于排序的索引字段和主键, 可以利用索引进行排序</strong></p>
<ul>
<li><p>查询 <code>id , name</code> , 使用 <code>name</code> 排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.id, e.name <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.name;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/110.jpg" style="width:730px; height:100px"> </p>
</li>
</ul>
<p><strong>场景4: 查询主键之外的没有添加索引的字段，不会利用索引排序</strong></p>
<ul>
<li><p>查询 <code>dep_id</code> ,使用 <code>name</code> 进行排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.dep_id <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.name;</span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> <span class="keyword">id</span>, e.dep_id <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.name;</span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.name;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/022.jpg" style="width:730px; height:100px"></p>
</li>
</ul>
<p><strong>场景5: 排序字段顺序与索引列顺序不一致,无法利用索引排序</strong></p>
<ul>
<li><p>使用联合索引时, ORDER BY子句也要求, 排序字段顺序和联合索引列顺序匹配。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.name, e.age <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.age,e.name;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/024.jpg" style="width:730px; height:100px"> </p>
</li>
</ul>
<p><strong>场景6: where 条件是 范围查询时, 会使order by  索引 失效 </strong></p>
<ul>
<li><p>比如 添加一个条件 :  <code>age &gt; 18</code> ,然后再根据 <code>age</code> 排序.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.name, e.age <span class="keyword">FROM</span> employee e <span class="keyword">WHERE</span> e.age &gt; <span class="number">10</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.age;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/025.jpg" style="width:730px; height:100px">  </p>
</li>
<li><p><strong>注意: ORDERBY子句不要求必须索引中第一列,没有仍然可以利用索引排序。但是有个前提条件，只有在等值过滤时才可以，范围查询时不</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.name, e.age <span class="keyword">FROM</span> employee e <span class="keyword">WHERE</span> e.age = <span class="number">18</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.age;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/026.jpg" style="width:730px; height:100px"> </p>
</li>
</ul>
<p><strong>场景7: 升降序不一致,无法利用索引排序</strong></p>
<ul>
<li><p>ORDER BY排序字段要么全部正序排序，要么全部倒序排序，否则无法利用索引排序。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 升序</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.name, e.age <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.name , e.age ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 降序</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.name, e.age <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.name <span class="keyword">DESC</span>, e.age <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/110.jpg" style="width:730px; height:100px"> </p>
</li>
<li><p>name字段升序,age字段降序,索引失效</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> e.name, e.age <span class="keyword">FROM</span> employee e <span class="keyword">ORDER</span> <span class="keyword">BY</span> e.name, e.age <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/027.jpg" style="width:730px; height:100px"> </p>
</li>
</ul>
<h3 id="索引优化实战"><a href="#索引优化实战" class="headerlink" title="索引优化实战"></a>索引优化实战</h3><h4 id="1-索引单表优化"><a href="#1-索引单表优化" class="headerlink" title="1.索引单表优化"></a>1.索引单表优化</h4><p>下面是一张<code>用户通讯表</code>的表结构信息,这张表来源于真实企业的实际项目中,有接近500万条数据.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> user_contacts (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  user_id <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户标识'</span>,</span><br><span class="line">  mobile <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'手机号'</span>,</span><br><span class="line">  <span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'姓名'</span>,</span><br><span class="line">  verson <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'版本'</span>,</span><br><span class="line">  create_by <span class="built_in">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建者'</span>,</span><br><span class="line">  create_date DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  update_by <span class="built_in">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新者'</span>,</span><br><span class="line">  update_date DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  remarks <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'备注信息'</span>,</span><br><span class="line">  del_flag <span class="built_in">CHAR</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'删除标识'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>需求一:</strong></p>
<ul>
<li>查询所有名字中包含李的用户姓名和手机号,并根据user_id字段排序</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NAME</span>, mobile <span class="keyword">FROM</span>  user_contacts <span class="keyword">WHERE</span> <span class="keyword">NAME</span> <span class="keyword">LIKE</span> <span class="string">'李%'</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> user_id;</span><br></pre></td></tr></table></figure>
<ul>
<li>通过explain命令 查看SQL查询优化信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> <span class="keyword">NAME</span>, mobile <span class="keyword">FROM</span>  user_contacts <span class="keyword">WHERE</span> <span class="keyword">NAME</span> <span class="keyword">LIKE</span> <span class="string">'%李%'</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> user_id;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/111.jpg" style="width:830px; height:80px"> </p>
<ul>
<li>分析的结果显示: type=ALL 是最坏的情况,并且Extra中还出现了 Using FIlesort(文件排序未使用到索引),所以必须优化</li>
</ul>
<p><strong>优化:</strong></p>
<ol>
<li>首先添加联合索引, 该联合索引包含所有要查询的字段,使其成为覆盖索引,一并解决like模糊查询时索引失效问题</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> user_contacts <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_nmu(<span class="keyword">NAME</span>,mobile,user_id);</span><br></pre></td></tr></table></figure>
<ol>
<li>explain分析</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> <span class="keyword">NAME</span>, mobile <span class="keyword">FROM</span>  user_contacts <span class="keyword">WHERE</span> <span class="keyword">NAME</span> <span class="keyword">LIKE</span> <span class="string">'%李%'</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> user_id;</span><br></pre></td></tr></table></figure>
<p> <img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/114.jpg" style="width:830px; height:80px"></p>
<ol>
<li><p>分析结果显示: type连接类型提升到了index级别,通过索引就获取到了全部数据,但是Extra字段中还是存在 Using filesort. </p>
</li>
<li><p>继续优化, 根据最佳左前缀法则,之后最左侧列是有序的, 在创建联合索引时,正确的顺序应该是: <strong>user_id,NAME,mobile</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除索引</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> idx_nmu <span class="keyword">ON</span> user_contacts </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加重新排序后的索引</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> user_contacts <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_unm(user_id,<span class="keyword">NAME</span>,mobile);</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行查询,发现type=index , Using filesort没有了.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> <span class="keyword">NAME</span>, mobile <span class="keyword">FROM</span>  user_contacts <span class="keyword">WHERE</span> <span class="keyword">NAME</span> <span class="keyword">LIKE</span> <span class="string">'%李%'</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> user_id;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/113.jpg" style="width:830px; height:80px"> </p>
</li>
</ol>
<p><strong>需求二:</strong></p>
<ul>
<li><p>统计手机号是135、136、186、187开头的用户数量.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span>  <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> user_contacts </span><br><span class="line"><span class="keyword">WHERE</span> mobile <span class="keyword">LIKE</span> <span class="string">'135%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'136%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'186%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'187%'</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过explain命令 查看SQL查询优化信息</p>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/115.jpg" style="width:830px; height:80px"> </p>
<p><code>type=index</code> : 用到了索引,但是进行了索引全表扫描</p>
<p><code>key=idx_unm</code>: 使用到了联合索引,但是效果并不是很好</p>
<p><code>Extra=Using where; Using index</code>:  查询的列被索引覆盖了,但是无法通过该索引直接获取数据.</p>
<p>综合上面的执行计划给出的信息,需要进行优化.</p>
</li>
</ul>
<p><strong>优化</strong></p>
<ol>
<li><p>经过上面的分析,发现联合索引没有发挥作用,所以尝试对 mobile字段单独建立索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> user_contacts <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_m(mobile);</span><br></pre></td></tr></table></figure>
</li>
<li><p>再次执行,得到下面的分析结果</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span>  <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> user_contacts </span><br><span class="line"><span class="keyword">WHERE</span> mobile <span class="keyword">LIKE</span> <span class="string">'135%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'136%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'186%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'187%'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/116.jpg" style="width:830px; height:100px"> </p>
<p><code>type=range</code>: 使用了索引进行范围查询,常见于使用&gt;，&gt;=，&lt;，&lt;=，BETWEEN，IN() 或者 like 等运算符的查询中。 </p>
<p><code>key=idx_m</code>: mysql选择了我们为mobile字段创建的索引,进行数据检索</p>
<p><code>rows=1575026</code>: 为获取所需数据而进行扫描的行数,比之前减少了近三分之一</p>
</li>
</ol>
<p><strong>count(*) 和 count(1)和count(列名)区别</strong>  </p>
<p>进行统计操作时,count中的统计条件可以三种选择:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span>  <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> user_contacts </span><br><span class="line"><span class="keyword">WHERE</span> mobile <span class="keyword">LIKE</span> <span class="string">'135%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'136%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'186%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'187%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span>  <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> user_contacts </span><br><span class="line"><span class="keyword">WHERE</span> mobile <span class="keyword">LIKE</span> <span class="string">'135%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'136%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'186%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'187%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span>  <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="number">1</span>) <span class="keyword">FROM</span> user_contacts </span><br><span class="line"><span class="keyword">WHERE</span> mobile <span class="keyword">LIKE</span> <span class="string">'135%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'136%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'186%'</span> <span class="keyword">OR</span> mobile <span class="keyword">LIKE</span> <span class="string">'187%'</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">执行效果:</span><br><span class="line">	count(*) 包括了所有的列,在统计时 不会忽略列值为null的数据.</span><br><span class="line">	count(1) 用1表示代码行,在统计时,不会忽略列值为null的数据.</span><br><span class="line">    count(列名)在统计时,会忽略列值为空的数据,就是说某个字段的值为null时不统计.</span><br><span class="line">执行效率:</span><br><span class="line">	列名为主键, count(列名)会比count(1)快</span><br><span class="line">    列名为不是主键, count(1)会比count(列名)快</span><br><span class="line">    如果表没有主键,count(1)会比count(*)快</span><br><span class="line">    如果表只有一个字段,则count(*) 最优.</span><br></pre></td></tr></table></figure>
<p><strong>需求三:</strong> </p>
<ul>
<li><p>查询2017-2-16日,新增的用户联系人信息. 查询字段: name , mobile</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> <span class="keyword">NAME</span>,mobile <span class="keyword">FROM</span> user_contacts  <span class="keyword">WHERE</span> <span class="keyword">DATE_FORMAT</span>(create_date,<span class="string">'%Y-%m-%d'</span>)=<span class="string">'2017-02-16'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/117.jpg" style="width:830px; height:80px"> </p>
</li>
</ul>
<p><strong>优化:</strong> </p>
<ul>
<li><p>explain分析的结果显示 <code>type=ALL</code> : 进行了全表扫描,需要进行优化,为create_date字段添加索引.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> user_contacts <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_cd(create_date);</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> <span class="keyword">NAME</span>,mobile <span class="keyword">FROM</span> user_contacts  <span class="keyword">WHERE</span> create_date </span><br><span class="line"><span class="keyword">BETWEEN</span> <span class="string">'2017-02-16 00:00:00'</span> <span class="keyword">AND</span> <span class="string">'2017-02-16 23:59:59'</span>;</span><br></pre></td></tr></table></figure>
<p> <img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/029.jpg" style="width:830px; height:90px"> </p>
<p>添加索引后,发现并没有使用到索引 <code>key=null</code> </p>
</li>
<li><p>分析原因: create_date字段是datetime类型 ,转换为日期再匹配,需要查询出所有行进行过滤, 所以导致索引失效.</p>
</li>
</ul>
<p><strong>继续优化:</strong> </p>
<ul>
<li><p>改为使用 between … and … ,使索引生效</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> <span class="keyword">NAME</span>,mobile <span class="keyword">FROM</span> user_contacts  <span class="keyword">WHERE</span> create_date </span><br><span class="line"><span class="keyword">BETWEEN</span> <span class="string">'2017-02-16 00:00:00'</span> <span class="keyword">AND</span> <span class="string">'2017-02-16 23:59:59'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/030.jpg" style="width:930px; height:80px"> </p>
<p><code>type=range</code> : 使用了索引进行范围查询 </p>
<p><code>Extra=Using index condition; Using MRR</code> :Using index condition 表示使用了部分索引, MRR表示InnoDB存储引擎 通过把「随机磁盘读」，转化为「顺序磁盘读」,从而提高了索引查询的性能.</p>
</li>
</ul>
<p><strong>需求四:</strong> </p>
<ul>
<li><p>获取用户通讯录表第10万条数据开始后的100条数据.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_contacts uc <span class="keyword">LIMIT</span> <span class="number">100000</span>,<span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询记录量越来越大，所花费的时间也会越来越多</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_contacts uc <span class="keyword">LIMIT</span> <span class="number">1000000</span>,<span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_contacts uc <span class="keyword">LIMIT</span> <span class="number">2000000</span>,<span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_contacts uc <span class="keyword">LIMIT</span> <span class="number">3000000</span>,<span class="number">100000</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/119.jpg" style="width:830px; height:90px"> </p>
</li>
<li><p>LIMIT 子句可以被用于指定 SELECT 语句返回的记录数。需注意以下几点：</p>
<ul>
<li><p>第一个参数指定第一个返回记录行的偏移量，注意从0开始()</p>
</li>
<li><p>第二个参数指定返回记录行的最大数目</p>
</li>
<li><p>如果只给定一个参数：它表示返回最大的记录行数目</p>
</li>
<li><p>初始记录行的偏移量是 0(而不是 1)</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>优化1: 通过索引进行分页</p>
<p>直接进行limit操作 会产生全表扫描,速度很慢. Limit限制的是从结果集的M位置处取出N条输出,其余抛弃.</p>
<p>假设ID是连续递增的,我们根据查询的页数和查询的记录数可以算出查询的id的范围，然后配合 limit使用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_contacts <span class="keyword">WHERE</span> <span class="keyword">id</span>  &gt;= <span class="number">100001</span> <span class="keyword">LIMIT</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/037.jpg" style="width:830px; height:90px"> </p>
<ul>
<li>type类型提升到了 range级别</li>
</ul>
</li>
<li><p>优化2: 使用子查询优化</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 首先定位偏移位置的id</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> user_contacts <span class="keyword">LIMIT</span> <span class="number">100000</span>,<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 根据获取到的id值向后查询.</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_contacts <span class="keyword">WHERE</span> <span class="keyword">id</span> &gt;=</span><br><span class="line">(<span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> user_contacts <span class="keyword">LIMIT</span> <span class="number">100000</span>,<span class="number">1</span>) <span class="keyword">LIMIT</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/038.jpg" style="width:830px; height:80px">  </p>
</li>
</ul>
<h4 id="2-索引多表优化"><a href="#2-索引多表优化" class="headerlink" title="2.索引多表优化"></a>2.索引多表优化</h4><ul>
<li><strong>用户手机认证表</strong><ul>
<li>该表约有11万数据,保存的是通过手机认证后的用户数据 </li>
<li>关联字段: <code>user_id</code> </li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mob_autht`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'标识'</span>,</span><br><span class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户标识'</span>,</span><br><span class="line">  <span class="string">`mobile`</span> <span class="built_in">varchar</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'手机号码'</span>,</span><br><span class="line">  <span class="string">`seevc_pwd`</span> <span class="built_in">varchar</span>(<span class="number">12</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'服务密码'</span>,</span><br><span class="line">  <span class="string">`autht_indc`</span> <span class="built_in">varchar</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'认证标志'</span>,</span><br><span class="line">  <span class="string">`verson`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'版本'</span>,</span><br><span class="line">  <span class="string">`create_by`</span> <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建者'</span>,</span><br><span class="line">  <span class="string">`create_date`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`update_by`</span> <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新者'</span>,</span><br><span class="line">  <span class="string">`update_date`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  <span class="string">`remarks`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'备注信息'</span>,</span><br><span class="line">  <span class="string">`del_flag`</span> <span class="built_in">char</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'删除标识'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>紧急联系人表</strong> <ul>
<li>该表约有22万数据,注册成功后,用户添加的紧急联系人信息.</li>
<li>关联字段: <code>user_id</code></li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`ugncy_cntct_psn`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'标识'</span>,</span><br><span class="line">  <span class="string">`psn_info_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'个人信息标识'</span>,</span><br><span class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'向钱用户标识'</span>,</span><br><span class="line">  <span class="string">`cntct_psn_name`</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'联系人姓名'</span>,</span><br><span class="line">  <span class="string">`cntct_psn_mob`</span> <span class="built_in">varchar</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'联系手机号'</span>,</span><br><span class="line">  <span class="string">`and_self_rltn_cde`</span> <span class="built_in">char</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'与本人关系代码 字典表关联'</span>,</span><br><span class="line">  <span class="string">`verson`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'版本'</span>,</span><br><span class="line">  <span class="string">`create_by`</span> <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建者'</span>,</span><br><span class="line">  <span class="string">`create_date`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`update_by`</span> <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新者'</span>,</span><br><span class="line">  <span class="string">`update_date`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  <span class="string">`remarks`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'备注信息'</span>,</span><br><span class="line">  <span class="string">`del_flag`</span> <span class="built_in">char</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'删除标识'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>借款申请表</strong><ul>
<li>该表约有11万数据,保存的是每次用户申请借款时 填写的信息.</li>
<li>关联字段: <code>user_id</code> </li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`loan_apply`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'借款申请标识'</span>,</span><br><span class="line">  <span class="string">`loan_nbr`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'借款编号'</span>,</span><br><span class="line">  <span class="string">`user_id`</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户标识'</span>,</span><br><span class="line">  <span class="string">`idnt_info_id`</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'身份信息标识'</span>,</span><br><span class="line">  <span class="string">`psn_info_id`</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'个人信息标识'</span>,</span><br><span class="line">  <span class="string">`mob_autht_id`</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'手机认证标识'</span>,</span><br><span class="line">  <span class="string">`bnk_card_id`</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'银行卡标识'</span>,</span><br><span class="line">  <span class="string">`apply_limit`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00'</span> <span class="keyword">COMMENT</span> <span class="string">'申请额度'</span>,</span><br><span class="line">  <span class="string">`apply_tlmt`</span> <span class="built_in">INT</span>(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'申请期限'</span>,</span><br><span class="line">  <span class="string">`apply_time`</span> DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'申请时间'</span>,</span><br><span class="line">  <span class="string">`audit_limit`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'审核额度'</span>,</span><br><span class="line">  <span class="string">`audit_tlmt`</span> <span class="built_in">INT</span>(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'审核期限'</span>,</span><br><span class="line">  <span class="string">`audit_time`</span> DATETIME <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'审核时间'</span>,</span><br><span class="line">  <span class="string">`cfrm_limit`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00'</span> <span class="keyword">COMMENT</span> <span class="string">'确认额度'</span>,</span><br><span class="line">  <span class="string">`cfrm_tlmt`</span> <span class="built_in">INT</span>(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'确认期限'</span>,</span><br><span class="line">  <span class="string">`cfrm_time`</span> DATETIME <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'确认时间'</span>,</span><br><span class="line">  <span class="string">`loan_sts_cde`</span> <span class="built_in">CHAR</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'借款状态:0 未提交 1 提交申请(初始) 2 已校验 3 通过审核4 未通过审核 5开始放款 6放弃借款 7 放款成功 '</span>,</span><br><span class="line">  <span class="string">`audit_mod_cde`</span> <span class="built_in">CHAR</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'审核模式：1 人工 2 智能'</span>,</span><br><span class="line">  <span class="string">`day_rate`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">8</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00000000'</span> <span class="keyword">COMMENT</span> <span class="string">'日利率'</span>,</span><br><span class="line">  <span class="string">`seevc_fee_day_rate`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">8</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00000000'</span> <span class="keyword">COMMENT</span> <span class="string">'服务费日利率'</span>,</span><br><span class="line">  <span class="string">`normal_paybk_tot_day_rate`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">8</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00000000'</span> <span class="keyword">COMMENT</span> <span class="string">'正常还款总日利率'</span>,</span><br><span class="line">  <span class="string">`ovrdu_fee_day_rate`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">8</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'逾期违约金日利率'</span>,</span><br><span class="line">  <span class="string">`day_intr_amt`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00'</span> <span class="keyword">COMMENT</span> <span class="string">'日利率金额'</span>,</span><br><span class="line">  <span class="string">`seevc_fee_day_intr_amt`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00'</span> <span class="keyword">COMMENT</span> <span class="string">'服务日利率金额'</span>,</span><br><span class="line">  <span class="string">`normal_paybk_tot_intr_amt`</span> <span class="built_in">DECIMAL</span>(<span class="number">16</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00'</span> <span class="keyword">COMMENT</span> <span class="string">'综合日利率金额'</span>,</span><br><span class="line">  <span class="string">`cnl_resn_time`</span> DATETIME <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'放弃时间'</span>,</span><br><span class="line">  <span class="string">`cnl_resn_cde`</span> <span class="built_in">CHAR</span>(<span class="number">8</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'放弃原因：关联字典代码'</span>,</span><br><span class="line">  <span class="string">`cnl_resn_othr`</span> <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'放弃的其他原因'</span>,</span><br><span class="line">  <span class="string">`verson`</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'版本'</span>,</span><br><span class="line">  <span class="string">`create_by`</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建者'</span>,</span><br><span class="line">  <span class="string">`create_date`</span> DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`update_by`</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新者'</span>,</span><br><span class="line">  <span class="string">`update_date`</span> DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  <span class="string">`remarks`</span> <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'备注信息'</span>,</span><br><span class="line">  <span class="string">`loan_dst_cde`</span> <span class="built_in">CHAR</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'0,未分配; 1,已分配'</span>,</span><br><span class="line">  <span class="string">`del_flag`</span> <span class="built_in">CHAR</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'删除标识'</span>,</span><br><span class="line">  <span class="string">`last_loan_apply_id`</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'上次借款申请标识'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`ind_loan_nbr`</span> (<span class="string">`loan_nbr`</span>) <span class="keyword">USING</span> BTREE,</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure>
<p><strong>需求一:</strong></p>
<ul>
<li><p>查询所有认证用户的手机号以及认证用户的紧急联系人的姓名与手机号信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> </span><br><span class="line">	ma.mobile <span class="string">'认证用户手机号'</span>,</span><br><span class="line">    ucp.cntct_psn_name <span class="string">'紧急联系人姓名'</span>,</span><br><span class="line">    ucp.cntct_psn_mob <span class="string">'紧急联系人手机号'</span></span><br><span class="line"><span class="keyword">from</span> mob_autht ma <span class="keyword">left</span> <span class="keyword">join</span> ugncy_cntct_psn ucp </span><br><span class="line"><span class="keyword">on</span> ma.user_id = ucp.user_id;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/031.jpg" style="width:930px; height:60px"> </p>
<ul>
<li>type 类型都是ALL, 使用了全表扫描</li>
</ul>
</li>
</ul>
<ul>
<li><p>优化:  为<code>mob_autht</code> 表的 user_id字段 添加索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> mob_autht <span class="keyword">add</span> <span class="keyword">index</span> idx_user_id(user_id);</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/121.jpg" style="width:930px; height:60px"> </p>
<ul>
<li><p>根据小结果及驱动大结果集的原则, <code>mob_autht</code>  是驱动表,驱动表即使建立索引也不会生效.</p>
</li>
<li><p>一般情况下: 左外连接左表是驱动表,右外连接右表就是驱动表.</p>
</li>
<li><p>explain分析结果的第一行的表,就是驱动表</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>继续优化: 为<code>ugncy_cntct_psn</code>表的 user_id字段 添加索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> ugncy_cntct_psn <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_userid(user_id);</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/034.jpg" style="width:930px; height:60px"></p>
<ul>
<li><code>mob_autht</code> 的type类型为ALL, <code>ugncy_cntct_psn</code>的type类型是ref</li>
</ul>
</li>
</ul>
<p><strong>需求二:</strong></p>
<ul>
<li><p>获取紧急联系人数量&gt;8的,用户手机号信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.获取紧急联系人&gt;8的,用户ID</span></span><br><span class="line"><span class="keyword">SELECT</span> user_id , <span class="keyword">COUNT</span>(user_id) c <span class="keyword">FROM</span> ugncy_cntct_psn <span class="keyword">GROUP</span> <span class="keyword">BY</span> user_id <span class="keyword">HAVING</span> c &gt; <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.获取认证用户的ID与手机号</span></span><br><span class="line"><span class="keyword">SELECT</span> user_id, mobile <span class="keyword">FROM</span> mob_autht</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.将上面两条SQL进行JOIN连接</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"> ucp.user_id,</span><br><span class="line"> <span class="keyword">COUNT</span>(ucp.user_id),</span><br><span class="line"> m.user_id,</span><br><span class="line"> m.mobile</span><br><span class="line"><span class="keyword">FROM</span> ugncy_cntct_psn ucp</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> user_id, mobile <span class="keyword">FROM</span> mob_autht) m <span class="keyword">ON</span> m.user_id = ucp.user_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ucp.user_id <span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(ucp.user_id) &gt; <span class="number">8</span> ;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/035.jpg" style="width:930px; height:70px"> </p>
<ul>
<li><code>Using temporary</code> : MySQL 创建了临时表,来保存结果.</li>
<li><code>Using filesort</code> : 使用了文件排序</li>
</ul>
</li>
<li><p>优化: 上面这种情况的原因是ySQL对所有 GROUP BY col1，col2…的字段进行了排序,如果用户想要避免排序结果的消耗，则可以指定 <code>ORDER By NULL</code> 来禁止排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> </span><br><span class="line"> ucp.user_id,</span><br><span class="line"> <span class="keyword">COUNT</span>(ucp.user_id),</span><br><span class="line"> m.user_id,</span><br><span class="line"> m.mobile</span><br><span class="line"><span class="keyword">FROM</span> ugncy_cntct_psn ucp</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> user_id, mobile <span class="keyword">FROM</span> mob_autht) m <span class="keyword">ON</span> m.user_id = ucp.user_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ucp.user_id <span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(ucp.user_id) &gt; <span class="number">8</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/036.jpg" style="width:930px; height:70px"> </p>
</li>
</ul>
<p><strong>需求三:</strong> </p>
<ul>
<li><p>获取所有智能审核的用户手机号和申请额度、申请时间、审核额度</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> </span><br><span class="line">    ma.mobile <span class="string">'用户认证手机号'</span>,</span><br><span class="line">    la.apply_limit <span class="string">'申请额度'</span>,</span><br><span class="line">     la.apply_time <span class="string">'申请时间'</span>,</span><br><span class="line">    la.audit_limit <span class="string">'审核额度'</span></span><br><span class="line"><span class="keyword">FROM</span> mob_autht ma <span class="keyword">inner</span> <span class="keyword">JOIN</span> loan_apply la <span class="keyword">ON</span> ma.id = la.mob_autht_id</span><br><span class="line"><span class="keyword">WHERE</span> la.audit_mod_cde = <span class="string">'2'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/039.jpg" style="width:930px; height:70px"></p>
</li>
<li><p>优化分析</p>
<ul>
<li><p>查询 <code>loan_apply</code>表,使用的条件字段为 <code>audit_mod_cde</code> ,因为该字段没有添加索引,导致  <code>type=ALL</code> 发生全表扫描,</p>
</li>
<li><p>为<code>audit_mod_cde</code> 字段添加索引,来提高查询效率.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> loan_apply <span class="keyword">ADD</span> <span class="keyword">INDEX</span> idx_amc(audit_mod_cde);</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/040.jpg" style="width:930px; height:70px"> </p>
<p>添加索引后type的类型确实提升了,但是需要注意的扫描的行还是很高,并且 Extra字段的值为 <code>Using where</code> 表示: 通过索引访问时,需要再回表访问所需的数据.</p>
<blockquote>
<p>注意: 如果执行计划中显示走了索引，但是rows值很高，extra显示为using where，那么执行效果就不会很好。因为索引访问的成本主要在回表上.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>继续优化:</p>
<ul>
<li><p><code>audit_mod_cde</code>  字段的含义是审核模式,只有两个值: 1 人工 2 智能 ,所以在根据该字段进行查询时,会有大量的相同数据.</p>
</li>
<li><p>比如: 统计一下 <code>audit_mod_cde = &#39;2&#39;</code>  的数据总条数,查询结果是9万多条,该表的总数接近11万条,查询出的数据行超过了表的总记录数的30%, 这时就不建议添加索引 ( 比如有1000万的数据，就算平均分后结果集也有500万条,结果集还是太大，查询效率依然不高 ).</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> loan_apply; <span class="comment">-- 109181条</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> loan_apply la <span class="keyword">WHERE</span> la.audit_mod_cde = <span class="string">'2'</span> ; <span class="comment">-- 91630条</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>总结: 唯一性太差的字段不需要创建索引,即便用于where条件.</strong></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>继续优化:</p>
<ul>
<li><p>如果一定要根据状态字段进行查询,我们可以根据业务需求 添加一个日期条件,比如获取某一时间段的数据,然后再区分状态字段.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 获取2017年 1月1号~1月5号的数据</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> </span><br><span class="line">    ma.mobile <span class="string">'用户认证手机号'</span>,</span><br><span class="line">    la.apply_time <span class="string">'申请时间'</span>,</span><br><span class="line">    la.apply_limit <span class="string">'申请额度'</span>,</span><br><span class="line">    la.audit_limit <span class="string">'审核额度'</span></span><br><span class="line"><span class="keyword">FROM</span>  loan_apply la  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> mob_autht ma  <span class="keyword">ON</span> la.mob_autht_id = ma.id </span><br><span class="line"><span class="keyword">WHERE</span> apply_time <span class="keyword">BETWEEN</span> <span class="string">'2017-01-01 00:00:00'</span> </span><br><span class="line"><span class="keyword">AND</span>  <span class="string">'2017-01-05 23:59:59'</span> <span class="keyword">AND</span> la.audit_mod_cde = <span class="string">'2'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="G:/%E4%B8%AD%E5%8D%8E%E7%9F%B3%E6%9D%89/%E6%9E%B6%E6%9E%84%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E9%A6%96%E5%B8%AD%E6%9E%B6%E6%9E%84%E5%B8%88%E7%9B%B4%E9%80%9A%E8%BD%A6/002.%E4%BA%92%E8%81%94%E7%BD%91%20Java%20%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%AD%E7%BB%83%E8%90%A5%E3%80%90%E5%AF%B9%E6%A0%87%E5%A4%A7%E5%8E%82%20P7%E3%80%91/003%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E5%BC%80%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/02_MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/172~185%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/120.jpg" style="width:800px; height:70px"> </p>
<p><code>extra = Using index condition;</code> : 只有一部分索引生效</p>
<p><code>MRR</code> 算法: 通过范围扫描将数据存入 <code>read_rnd_buffer_size</code> ，然后对其按照 Primary Key（RowID）排序，最后使用排序好的数据进行顺序回表，因为 InnoDB 中叶子节点数据是按照 Primary Key（RowID）进行排列的，这样就转换随机IO为顺序IO了，从而减小磁盘的随机访问.</p>
</li>
</ul>
</li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/Mysql/" rel="tag"># Mysql</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/12/21/mysql/001.MySQL_InnoDB内存结构/" rel="next" title="Mysql_InnoDB内存结构">
                <i class="fa fa-chevron-left"></i> Mysql_InnoDB内存结构
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/01/03/mysql/011.Mysql_性能优化之索引/" rel="prev" title="Mysql_性能优化之索引">
                Mysql_性能优化之索引 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">最光阴</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">64</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#索引原理"><span class="nav-text">索引原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-二叉查找树"><span class="nav-text">1.二叉查找树</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-平衡二叉树-AVL-Tree"><span class="nav-text">2.平衡二叉树 (AVL Tree)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-B-Tree"><span class="nav-text">3.B-Tree</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-B-Tree"><span class="nav-text">4.B+Tree</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-Hash索引"><span class="nav-text">5.Hash索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-聚簇索引与非聚簇索引"><span class="nav-text">6.聚簇索引与非聚簇索引</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Explain性能分析"><span class="nav-text">Explain性能分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Explain-概述"><span class="nav-text">1.Explain 概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Explain-详解"><span class="nav-text">2.Explain 详解</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引优化原则"><span class="nav-text">索引优化原则</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-数据准备"><span class="nav-text">1.数据准备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-优化原则详解"><span class="nav-text">2.优化原则详解</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#慢查询日志分析"><span class="nav-text">慢查询日志分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-慢查询设置与测试"><span class="nav-text">1.慢查询设置与测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-慢查询SQL优化思路"><span class="nav-text">2.慢查询SQL优化思路</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JOIN优化"><span class="nav-text">JOIN优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-JOIN算法原理"><span class="nav-text">1.JOIN算法原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-in和exists函数"><span class="nav-text">2.in和exists函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#order-by优化"><span class="nav-text">order by优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-索引排序"><span class="nav-text">1.索引排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-额外排序"><span class="nav-text">2.额外排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-排序优化"><span class="nav-text">3.排序优化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引优化实战"><span class="nav-text">索引优化实战</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-索引单表优化"><span class="nav-text">1.索引单表优化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-索引多表优化"><span class="nav-text">2.索引多表优化</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2023</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">最光阴</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.2</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>




  
  <script src="/js/scrollspy.js?v=7.1.2"></script>
<script src="/js/post-details.js?v=7.1.2"></script>



  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
